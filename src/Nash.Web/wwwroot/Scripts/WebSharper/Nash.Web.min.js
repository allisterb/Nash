(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV;b=a.Nash=a.Nash||{};c=b.Web=b.Web||{};d=c.ClientExtensions=c.ClientExtensions||{};e=d.SweetAlert=d.SweetAlert||{};f=a.StartupCode$Nash_Web$ClientExtensions=a.StartupCode$Nash_Web$ClientExtensions||{};g=c.Bs=c.Bs||{};h=a.StartupCode$Nash_Web$Bootstrap=a.StartupCode$Nash_Web$Bootstrap||{};i=c.JQueryPieProgressOptions=c.JQueryPieProgressOptions||{};j=b.NLU=b.NLU||{};k=j.Witai=j.Witai||{};l=k.Utterance=k.Utterance||{};m=k.Intent=k.Intent||{};n=k.Entity=k.Entity||{};o=k.Trait=k.Trait||{};p=k["Utterance'"]=k["Utterance'"]||{};q=k["Value'"]=k["Value'"]||{};r=c.BabelNet=c.BabelNet||{};s=r.DisambiguateApiResponse=r.DisambiguateApiResponse||{};t=r.TokenFragment=r.TokenFragment||{};u=r.CharFragment=r.CharFragment||{};v=c.NLG=c.NLG||{};w=a.StartupCode$Nash_Web$NLG=a.StartupCode$Nash_Web$NLG||{};x=c.NLU=c.NLU||{};y=x.Intent=x.Intent||{};z=x.Trait=x.Trait||{};A=x.Entity=x.Entity||{};B=x.Utterance=x.Utterance||{};C=x.Voice=x.Voice||{};D=C["Entity'"]=C["Entity'"]||{};E=x.Text=x.Text||{};F=E["Utterance'"]=E["Utterance'"]||{};G=E["Intent'"]=E["Intent'"]||{};H=E["Entity'"]=E["Entity'"]||{};I=E["Trait'"]=E["Trait'"]||{};J=x.Domain=x.Domain||{};K=a.StartupCode$Nash_Web$NLU=a.StartupCode$Nash_Web$NLU||{};L=c.Knowledge=c.Knowledge||{};M=L.EmotionalTrait=L.EmotionalTrait||{};N=L.BehavioralTrait=L.BehavioralTrait||{};O=L.Relation=L.Relation||{};P=L.Triple=L.Triple||{};Q=L.Subject=L.Subject||{};R=L.Verb=L.Verb||{};S=L.Object=L.Object||{};T=L.ExpertAIEntity=L.ExpertAIEntity||{};U=L.ExpertAILemma=L.ExpertAILemma||{};V=L.WritingJournlEntry=L.WritingJournlEntry||{};W=c.CUI=c.CUI||{};X=W.MicState=W.MicState||{};Y=W.ClientState=W.ClientState||{};Z=W.Interpreter=W.Interpreter||{};_0=W.CUI=W.CUI||{};_1=c.Dialogue=c.Dialogue||{};_2=c.Question=c.Question||{};_3=c.QuestionType=c.QuestionType||{};_4=c.DialogueModule=c.DialogueModule||{};_5=c.QuestionDialogs=c.QuestionDialogs||{};_6=c.Questions=c.Questions||{};_7=c.Symptoms=c.Symptoms||{};_8=a.StartupCode$Nash_Web$Symptoms=a.StartupCode$Nash_Web$Symptoms||{};_9=c.Journal=c.Journal||{};_=a.StartupCode$Nash_Web$Journal=a.StartupCode$Nash_Web$Journal||{};$=c.Tests=c.Tests||{};ba=a.StartupCode$Nash_Web$Tests=a.StartupCode$Nash_Web$Tests||{};bb=c.Accounting=c.Accounting||{};bc=a.StartupCode$Nash_Web$Accounting=a.StartupCode$Nash_Web$Accounting||{};bd=c.User=c.User||{};be=a.StartupCode$Nash_Web$User=a.StartupCode$Nash_Web$User||{};bf=c.Main=c.Main||{};bg=a.StartupCode$Nash_Web$Main=a.StartupCode$Nash_Web$Main||{};bh=c.Client=c.Client||{};bi=a.StartupCode$Nash_Web$Client=a.StartupCode$Nash_Web$Client||{};bj=a.Nash$Web_GeneratedPrintf=a.Nash$Web_GeneratedPrintf||{};bk=a.GeneratedPrintf=a.GeneratedPrintf||{};bl=a.WebSharper;bm=bl&&bl.Arrays;bn=a.SweetAlert;bo=a.IntelliFactory;bp=bo&&bo.Runtime;bq=bl&&bl.Operators;br=bl&&bl.UI;bs=br&&br.Doc;bt=br&&br.AttrProxy;bu=br&&br.Client;bv=bu&&bu.Templates;bw=bl&&bl.Utils;bx=a.console;by=a.jQuery;bz=bl&&bl.Random;bA=bl&&bl.List;bB=br&&br.AttrModule;bC=bl&&bl.Concurrency;bD=bl&&bl.Seq;bE=bl&&bl.Strings;bF=bl&&bl.JavaScript;bG=bF&&bF.Pervasives;bH=bl&&bl.Numeric;bI=bl&&bl.ClientSideJson;bJ=bI&&bI.Provider;bK=a.JSON;bL=bl&&bl.Collections;bM=bL&&bL.Map;bN=a.SDK;bO=bl&&bl.Unchecked;bP=a.Date;bQ=bl&&bl.Remoting;bR=bQ&&bQ.AjaxRemotingProvider;bS=a.Math;bT=a.Wit;bU=a.document;bV=bL&&bL.Dictionary;d.getCameraCanvas=function(){return a.getCameraCanvas();};d.stopCamera=function(){return a.stopCamera();};d.startCamera=function(bW,bX){return a.startCamera(bW,bX);};d.speechSynthesis=function(){return a.speechSynthesis;};d.lastMicData=function(){return a.lastMicData;};d.Terminal=function(){return a.$("#term").terminal();};d.enableTerminal=function(){return a.$("#term").terminal().enable();};d.disableTerminal=function(){return a.$("#term").terminal().disable();};d.shuffleArray=function(bW){bm.iteri(function(bX){return d.swap(bW,bX,d.rnd().Next(bX,bW.length));},bW);return bW;};d.swap=function(bW,bX,bY){var bZ;bZ=bm.get(bW,bX);bm.set(bW,bX,bm.get(bW,bY));bm.set(bW,bY,bZ);};d.boxesWithTitles=function(bW){return bm.map(function(bX){var bY;bY={};bY.titleText=bX;return bY;},bW);};d.confirmQuestionBox=function(){bn.clickConfirm();};d.questionBox=function(bW,bX,bY,bZ,b0,b1,b2){var b3,b4,b5,b6,b7,b8;b3=(b4=bZ==null?(b5={},b5.titleText=bW,b5.text=bX,b5.icon="question",b5.html="<div></div>",b5.allowOutsideClick=false,b5):(b6=bZ.$0[0],(b7={},b7.titleText=bW,b7.text=bX,b7.icon="question",b7.width=a.String(b6),b7.html=(((bp.Curried3(function(b9,b_,b$){return b9("<div class=\"swal2-content-custom\" style=\"width:"+a.String(b_)+"px;height:"+a.String(b$)+"px\"></div>");}))(a.id))(b6))(bZ.$0[1]),b7.allowOutsideClick=false,b7)),(b0!=null?b0.$0(b4):void 0,bY!=null&&bY.$==1?(b8=bY.$0,(b4.progressSteps=bm.ofSeq(bq.range(1,bm.length(b8))),bn.mixin(b4).queue(bm.create(bm.length(b8),b4)))):bn.fire(b4)));if(b1!=null)b1.$0();b3.then(b2);};e.get_QueueBoxes=function(){var bW;bW=bn.mixin({});return function(bX){return bW.queue(bX);};};d.getDialogueBoxInput=function(){return bm.get(a.jQuery(".swal2-input").get(),0);};d.getDialogueBoxCanvas=function(){return bm.get(a.jQuery("canvas.swal2-content").get(),0);};d.getDialogueBoxContent=function(){return bm.get(a.jQuery("#swal2-content").get(),0).firstChild;};d.createDialogueBoxCanvas=function(){return d.createCanvas("camera","640","480",bm.get(a.jQuery("#swal2-content").get(),0).firstChild);};d.createCanvas=function(bW,bX,bY,bZ){var b0;b0=bs.Element("canvas",[d.eid(bW),bt.Create("width",bX),bt.Create("height",bY)],[]);bv.LoadLocalTemplates("");bs.Run(bZ,b0);return bZ.firstChild;};d.elementHTML=function(bW){return bW.innerHTML;};d.createElement=function(bW){var bX;bX=self.document.createElement("div");self.document.appendChild(bX);bv.LoadLocalTemplates("");bs.RunAppend(bX,bW);};d.getContainer=function(){return bm.get(a.jQuery("#container").get(),0).firstChild;};d.container=function(bW){return bs.Element("div",[d.cls("container")],bW);};d.dindex=function(bW){return bt.Create("data-index",a.String(bW));};d.href=function(bW){return bt.Create("href",bW);};d.cls=function(bW){return bt.Create("class",bW);};d.reid=function(bW){var bX;return d.eid(bW+"-"+(bX=d.rnd().Next$2(),a.String(bX)));};d.eid=function(bW){return bt.Create("id",bW);};d.getMic=function(){return bm.get(a.jQuery("#microphone").get(),0);};d.terminalOutput=function(){return bm.get(a.jQuery(".terminal-output").get(),0);};d.toLower=function(bW){return bW.toLowerCase();};d.debug=function(bW,bX){d.info((((bp.Curried3(function(bY,bZ,b0){return bY("DEBUG: "+bw.toSafe(bZ)+": "+bw.prettyPrint(b0));}))(a.id))(bW.toUpperCase()))(bX));};d.error=function(bW){bx.error(bW);};d.info=function(bW){bx.info(bW);};d.jserror=function(bW){by.error(bW);};d.toArray=function(bW){return bm.map(a.id,by.makeArray(bW));};d["Terminal.EchoHtml'"]=function(bW,bX){bW.pause();bW.echo(bX,d.rawOpt());bW.resume();};d["Terminal.Echo'"]=function(bW,bX){bW.pause();bW.echo(bX);bW.resume();};d.rawOpt=function(){f.$cctor();return f.rawOpt;};d.rnd=function(){f.$cctor();return f.rnd;};f.$cctor=function(){var bW;f.$cctor=a.ignore;f.rnd=new bz.New();f.rawOpt=(bW={},bW.raw=true,bW);};g.radio=function(bW,bX,bY,bZ,b0){return bs.Element("div",new bA.T({$:1,$0:d.cls("radio"),$1:bX}),[bs.Element("label",bZ,[bs.Radio(b0,true,bY),bs.TextNode(bW)])]);};g.checkbox=function(bW,bX,bY,bZ,b0){return bs.Element("div",new bA.T({$:1,$0:d.cls("checkbox"),$1:bX}),[bs.Element("label",bZ,[bs.CheckBox(b0,bY),bs.TextNode(bW)])]);};g.textArea=function(bW,bX,bY,bZ,b0){return bs.Element("div",new bA.T({$:1,$0:d.cls("form-group"),$1:bX}),[bs.Element("label",bZ,[bs.TextNode(bW)]),bs.InputArea(new bA.T({$:1,$0:d.cls("form-control"),$1:b0}),bY)]);};g.inputPassword=function(bW,bX,bY,bZ,b0){return bs.Element("div",new bA.T({$:1,$0:d.cls("form-group"),$1:bX}),[bs.Element("label",bZ,[bs.TextNode(bW)]),bs.PasswordBox(new bA.T({$:1,$0:d.cls("form-control"),$1:b0}),bY)]);};g.input=function(bW,bX,bY,bZ,b0){return bs.Element("div",new bA.T({$:1,$0:d.cls("form-group"),$1:bX}),[bs.Element("label",bZ,[bs.TextNode(bW)]),bs.Input([d.cls("form-control"),b0],bY)]);};g.btnSecondaryDropdown=function(bW,bX,bY){return g.btnDropdown("btn-secondary",bW,bX,bY);};g.btnPrimaryDropdown=function(bW,bX,bY){return g.btnDropdown("btn-primary",bW,bX,bY);};g.btnDropdown=function(bW,bX,bY,bZ){var b0,b1,b2;b0="btndropdown"+"-"+(b1=d.rnd().Next$2(),a.String(b1));b2=bt.Create("id",b0);return bs.Element("div",[d.cls("btn-group dropright")],[bs.Element("button",[b2,d.cls(g.btncls()+" "+bW+" "+"dropdown-toggle"),bt.Create("type","button"),bt.Create("data-toggle","dropdown"),bt.Create("aria-haspopup","true"),bt.Create("aria-expanded","false")],[bs.TextNode(bX)]),bs.Element("div",[d.cls("dropdown-menu"),bt.Create("aria-labelledby",b0)],bA.mapi(function(b3,b4){return bs.Element("a",[d.cls("dropdown-item"),d.href("#"),bB.Handler("click",bZ.get_Item(b3))],[bs.TextNode(b4)]);},bY))]);};g.btnDark=function(bW,bX){return g.btn("btn-dark",bW,bX);};g.btnLight=function(bW,bX){return g.btn("btn-light",bW,bX);};g.btnInfo=function(bW,bX){return g.btn("btn-info",bW,bX);};g.btnWarning=function(bW,bX){return g.btn("btn-warning",bW,bX);};g.btnDanger=function(bW,bX){return g.btn("btn-danger",bW,bX);};g.btnSuccess=function(bW,bX){return g.btn("btn-success",bW,bX);};g.btnSecondary=function(bW,bX){return g.btn("btn-secondary",bW,bX);};g.btnPrimary=function(bW,bX){return g.btn("btn-primary",bW,bX);};g.btn=function(bW,bX,bY){return bs.Element("button",[d.reid("btn"),d.cls(g.btncls()+" "+bW),bB.Handler("click",bY)],[bs.TextNode(bX)]);};g.btncls=function(){h.$cctor();return h.btncls;};h.$cctor=function(){h.$cctor=a.ignore;h.btncls=by(self).width()<=479?"btn btn-sm":"btn";};i.New=function(bW,bX,bY,bZ,b0,b1,b2,b3){return{namespace:bW,goal:bX,first:bY,min:bZ,max:b0,speed:b1,easing:b2,numberCallback:b3};};l.New=function(bW,bX,bY,bZ){return{text:bW,intents:bX,entities:bY,traits:bZ};};m.New=function(bW,bX,bY){return{id:bW,name:bX,confidence:bY};};n.New=function(bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6){return{id:bW,name:bX,role:bY,start:bZ,end:b0,body:b1,confidence:b2,entities:b3,suggested:b4,value:b5,type:b6};};o.New=function(bW,bX,bY){return{id:bW,value:bX,confidence:bY};};p.New=function(bW){return{intent:bW};};q.New=function(bW){return{value:bW};};k.getMeaning2=function(bW,bX){function bY(bZ,b0){var b1;by.ajax((b1={},b1.url=(function(b2){return function(b3){return b2("https://api.wit.ai/message?q="+bw.toSafe(b3));};}(a.id))(bX),b1.type="GET",b1.beforeSend=function(b2){return b2.setRequestHeader("Authorization","Bearer "+bW);},b1.success=function(b2){return bZ(b2);},b1.error=function(b2){return b0(new a.Error(b2.responseText));},b1));}return bC.FromContinuations(function(bZ,b0,b1){return bY.apply(null,[bZ,b0,b1]);});};k.getMeaning=function(bW,bX,bY,bZ){var b0;by.ajax((b0={},b0.url=(function(b1){return function(b2){return b1("https://api.wit.ai/message?q="+bw.toSafe(b2));};}(a.id))(bX),b0.type="GET",b0.beforeSend=function(b1){return b1.setRequestHeader("Authorization","Bearer "+bW);},b0.success=bY,b0.error=bZ,b0));};s.New=function(bW,bX,bY,bZ,b0,b1,b2,b3,b4){return{tokenFragment:bW,charFragment:bX,babelSynsetID:bY,DBpediaURL:bZ,BabelNetURL:b0,score:b1,cohrenceScore:b2,globalScore:b3,source:b4};};t.New=function(bW,bX){return{start:bW,end:bX};};u.New=function(bW,bX){return{start:bW,end:bX};};r.disambiguate=function(bW){function bX(bY,bZ){var b0;by.ajax((b0={},b0.url=(function(b1){return function(b2){return b1("https://babelfy.io/v1/disambiguate?text="+bw.toSafe(b2)+"&lang=EN&extAIDA=true&key=983fc0ec-a6fa-49ef-bd02-203c18aef272");};}(a.id))(bW),b0.type="GET",b0.success=function(b1){return bY(b1);},b0.error=function(b1){return bZ(new a.Error(b1.responseText));},b0));}return bC.FromContinuations(function(bY,bZ,b0){return bX.apply(null,[bY,bZ,b0]);});};v.waitAddPhrases=function(){w.$cctor();return w.waitAddPhrases;};v.waitRetrievePhrases=function(){w.$cctor();return w.waitRetrievePhrases;};v.helpPhrases=function(){w.$cctor();return w.helpPhrases;};v.helloUserPhrases=function(){w.$cctor();return w.helloUserPhrases;};v.helloPhrases=function(){w.$cctor();return w.helloPhrases;};v["getRandomPhrase'"]=function(bW){return v.replace_tok("$0","",bD.nth(v.rng().Next(0,bW.get_Length()),bW));};v.getRandomPhrase=function(bW,bX){return v.replace_tok("$0",bX,bD.nth(v.rng().Next(0,bW.get_Length()),bW));};v.replace_tok=function(bW,bX,bY){return bE.Replace(bY,bW,bX);};v.rng=function(){w.$cctor();return w.rng;};w.$cctor=function(){w.$cctor=a.ignore;w.rng=new bz.New();w.helloPhrases=bA.ofArray(["Welcome!","Welcome, my name is Nash.","Welcome to Nash. How can I help?","Hello this is Nash, how can I help?","Hello, I am Nash. How can I help?","Hello, I am Nash. How may I help you now?","I'm Nash. Tell me your name so we can get started."]);w.helloUserPhrases=bA.ofArray(["Hello $0, welcome back.","Welcome $0, nice to see you again.","Hello $0.","Good to see you $0.","Hello $0, nice to see you."]);w.helpPhrases=bA.ofArray(["What can I help you with $0?"]);w.waitRetrievePhrases=bA.ofArray(["Ok, let me check that $0 for you","Please wait while I check that $0 for you.","Wait while I check that $0.","Ok let me see if I can find that $0."]);w.waitAddPhrases=bA.ofArray(["Ok, let me add that $0 for you","Please wait while I add that $0 for you.","Wait while I add that $0.","I'll add that $0 now."]);};y=x.Intent=bp.Class({toString:function(){return(((bp.Curried3(function(bW,bX,bY){return bW("Intent("+bw.toSafe(bX)+", "+bj.p$16(bY)+")");}))(a.id))(this.get_Name()))(this.get_Confidence());},get_Confidence:function(){return this.$1;},get_Name:function(){return this.$0;}},null,y);z=x.Trait=bp.Class({toString:function(){return(((bp.Curried3(function(bW,bX,bY){return bW("Trait("+bw.toSafe(bX)+", "+bw.prettyPrint(bY)+")");}))(a.id))(this.get_Name()))(this.get_Value());},get_Confidence:function(){return this.$2;},get_Value:function(){return this.$1;},get_Name:function(){return this.$0;}},null,z);A=x.Entity=bp.Class({toString:function(){return(((((bp.Curried(function(bW,bX,bY,bZ,b0){return bW("Entity("+bw.toSafe(bX)+", "+bw.toSafe(bY)+", "+bw.toSafe(bZ)+", "+bj.p$16(b0)+")");},5))(a.id))(this.get_Name()))(this.get_Role()))(this.get_Value()))(this.get_Confidence());},get_Confidence:function(){return this.$3;},get_Value:function(){return this.$2;},get_Role:function(){return this.$1;},get_Name:function(){return this.$0;}},null,A);B=x.Utterance=bp.Class({toString:function(){return((((bp.Curried(function(bW,bX,bY,bZ){return bW(bj.p$14(bX)+" "+bj.p$17(bY)+" "+bj.p$19(bZ));},4))(a.id))(this.get_Intent()))(this.get_Traits()))(this.get_Entities());},get_Entities:function(){var bW;bW=this.$3;return bW!=null?{$:1,$0:bA.sortBy(function(bX){return bX.get_Name();},bW.$0)}:null;},get_Traits:function(){var bW;bW=this.$2;return bW!=null?{$:1,$0:bA.sortBy(function(bX){return bX.get_Name();},bW.$0)}:null;},get_Intent:function(){return this.$1;},get_Text:function(){return this.$0;}},null,B);D.New=function(bW,bX,bY,bZ,b0){return{body:bW,end:bX,start:bY,suggested:bZ,value:b0};};C["Intent'"]=function(bW,bX){return!(bX.intent==null)?{$:1,$0:new y({$:0,$0:d.toLower(bX.intent.value),$1:null})}:null;};C["Trait'"]=function(bW){return!(bW.domain==null)?{$:1,$0:new z({$:0,$0:"domain",$1:d.toLower(bW.domain.value),$2:null})}:!(bW.dialogue_act==null)?{$:1,$0:new z({$:0,$0:"dialogue_act",$1:d.toLower(bW.dialogue_act.value),$2:null})}:null;};C["Entity'$1"]=function(bW){return!(bW.contact==null)?{$:1,$0:new A({$:0,$0:"contact",$1:"",$2:d.toLower(bW.contact.value),$3:null})}:null;};F=E["Utterance'"]=bp.Class({get_TopIntent:function(){return bA.head(bA.sortBy(function(bW){return bW.get_Confidence();},this.get_Intents()));},get_Traits:function(){return this.$3;},get_Entities:function(){return this.$2;},get_Intents:function(){return this.$1;},get_Text:function(){return this.$0;}},null,F);G=E["Intent'"]=bp.Class({get_Confidence:function(){return this.$1;},get_Name:function(){return this.$0;}},null,G);H=E["Entity'"]=bp.Class({get_Value:function(){return(this.get_Unwrap())[3];},get_Role:function(){return(this.get_Unwrap())[2];},get_Confidence:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1,this.$2,this.$3];}},null,H);I=E["Trait'"]=bp.Class({get_Value:function(){return(this.get_Unwrap())[2];},get_Confidence:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1,this.$2];}},null,I);E.HasUtterance=function(bW){var bX,bY,bZ,b0,b1,b2;return bW!=null&&bW.$==1&&(bW.$0.$2.get_Length()>0&&(bX=[bW.$0.$2,bW.$0.$1,bW,bW.$0.$0,bW.$0.$3],true))?(bY=bX[0],(bZ=bX[2],(b0=bX[4],(b1=bX[1].$==0?null:{$:1,$0:new y({$:0,$0:bZ.$0.get_TopIntent().get_Name(),$1:{$:1,$0:bZ.$0.get_TopIntent().get_Confidence()}})},(b2=bY.$==0?null:{$:1,$0:bA.map(function(b3){return new A({$:0,$0:b3.get_Name(),$1:d.toLower(b3.get_Role()),$2:b3.get_Value(),$3:{$:1,$0:b3.get_Confidence()}});},bA.filter(function(b3){return b3.get_Confidence()>E.entityConfidenceThreshold();},bY))},{$:1,$0:new B({$:0,$0:bX[3],$1:b1,$2:b0.$==0?null:{$:1,$0:bA.map(function(b3){return new z({$:0,$0:d.toLower(b3.get_Name()),$1:b3.get_Value(),$2:{$:1,$0:b3.get_Confidence()}});},bA.filter(function(b3){return b3.get_Confidence()>E.entityConfidenceThreshold();},b0))},$3:b2})}))))):null;};E.entityConfidenceThreshold=function(){K.$cctor();return K.entityConfidenceThreshold;};E.set_entityConfidenceThreshold=function(bW){K.$cctor();K.entityConfidenceThreshold=bW;};E.intentConfidenceThreshold=function(){K.$cctor();return K.intentConfidenceThreshold;};E.set_intentConfidenceThreshold=function(bW){K.$cctor();K.intentConfidenceThreshold=bW;};E.getUtterance=function(bW,bX){k.getMeaning("W2WAT2D6U634KSKMR44NWFHJWQAVLVV3",bW,function(bY){var bZ,b0,b1;d.debug("NLU",(function(b2){return function(b3){return b2("Wit.ai returned: "+bw.prettyPrint(b3));};}(a.id))(bY));bZ=!(bY.intents==null)?bA.ofArray(bm.map(function(b2){return new G({$:0,$0:b2.name,$1:b2.confidence});},bY.intents)):bA.T.Empty;b0=!(bY.traits==null)?bA.ofSeq(bD.concat(bA.map(function(b2){return bm.map(function(b3){return new I({$:0,$0:b2,$1:b3.confidence,$2:b3.value});},bG.GetJS(bY.traits,[b2]));},bA.filter(function(b2){return!(bG.GetJS(bY.traits,[b2])==null);},E.trait_types())))):bA.T.Empty;b1=new F({$:0,$0:bW,$1:bZ,$2:!(bY.entities==null)?bA.ofSeq(bD.concat(bA.map(function(b2){return bm.map(function(b3){return new H({$:0,$0:b3.name,$1:b3.confidence,$2:b3.role,$3:b3.value});},bG.GetJS(bY.entities,[b2]));},bA.filter(function(b2){return!(bG.GetJS(bY.entities,[b2])==null);},E.entity_types())))):bA.T.Empty,$3:b0});d.debug("NLU",(function(b2){return function(b3){return b2("Utterance: "+bj.p$23(b3)+" ");};}(a.id))(b1));return bX({$:1,$0:b1});},function(bY,bZ,b0){d.error((((bp.Curried3(function(b1,b2,b3){return b1("Wit.ai returned: "+bw.prettyPrint(b2)+" "+bw.prettyPrint(b3));}))(a.id))(bZ))(b0));return bX(null);});};E.trait_types=function(){K.$cctor();return K.trait_types;};E.entity_types=function(){K.$cctor();return K.entity_types;};E.local_search_query_entity_types=function(){K.$cctor();return K.local_search_query_entity_types;};E.datetime_entity_types=function(){K.$cctor();return K.datetime_entity_types;};E.contact_entity_types=function(){K.$cctor();return K.contact_entity_types;};E.agenda_entry_entity_types=function(){K.$cctor();return K.agenda_entry_entity_types;};E.QuickAccounts=function(bW){return bW==="accounts"?{$:1,$0:new B({$:0,$0:"accounts",$1:{$:1,$0:new y({$:0,$0:"accounts",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};E.JournalEntry=function(bW){var bX;return bE.StartsWith(bW,"journal ")&&bE.Replace(bW,"journal ","")!==""?(bX=bE.Replace(bW,"journal ",""),{$:1,$0:new B({$:0,$0:"journal",$1:{$:1,$0:new y({$:0,$0:"journal",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bA.ofArray([new A({$:0,$0:"journal_entry",$1:"",$2:bX,$3:{$:1,$0:1}})])}})}):null;};E.QuickJournal=function(bW){var bX;return bW==="journal"||bW==="diary"?{$:1,$0:new B({$:0,$0:"journal",$1:{$:1,$0:new y({$:0,$0:"journal",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};E.QuickNumber=function(bW){var bX,bY,bZ,b0,b1,b2;return(bY=E.One(bW),bY!=null&&bY.$==1?(bX=bY.$0,true):(bZ=E.Two(bW),bZ!=null&&bZ.$==1?(bX=bZ.$0,true):(b0=E.Three(bW),b0!=null&&b0.$==1?(bX=b0.$0,true):(b1=E.Four(bW),b1!=null&&b1.$==1?(bX=b1.$0,true):(b2=E.Five(bW),b2!=null&&b2.$==1&&(bX=b2.$0,true))))))?{$:1,$0:bX}:null;};E.Five=function(bW){var bX;return bW==="5"||bW==="five"?{$:1,$0:new B({$:0,$0:"five",$1:{$:1,$0:new y({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bA.ofArray([new A({$:0,$0:"wit/ordinal",$1:"",$2:"five",$3:{$:1,$0:1}})])}})}:null;};E.Four=function(bW){var bX;return bW==="4"||bW==="four"?{$:1,$0:new B({$:0,$0:"four",$1:{$:1,$0:new y({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bA.ofArray([new A({$:0,$0:"wit/ordinal",$1:"",$2:"four",$3:{$:1,$0:1}})])}})}:null;};E.Three=function(bW){var bX;return bW==="3"||bW==="three"?{$:1,$0:new B({$:0,$0:"three",$1:{$:1,$0:new y({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bA.ofArray([new A({$:0,$0:"wit/ordinal",$1:"",$2:"three",$3:{$:1,$0:1}})])}})}:null;};E.Two=function(bW){var bX;return bW==="2"||bW==="two"?{$:1,$0:new B({$:0,$0:"two",$1:{$:1,$0:new y({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bA.ofArray([new A({$:0,$0:"wit/ordinal",$1:"",$2:"two",$3:{$:1,$0:1}})])}})}:null;};E.One=function(bW){var bX;return bW==="1"||bW==="one"?{$:1,$0:new B({$:0,$0:"one",$1:{$:1,$0:new y({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bA.ofArray([new A({$:0,$0:"wit/ordinal",$1:"",$2:"one",$3:{$:1,$0:1}})])}})}:null;};E.QuickNo=function(bW){var bX;return bW==="no"||(bW==="nope"||(bW==="no way"||(bW==="nah"||(bW==="don't do it"||bW==="stop"))))?{$:1,$0:new B({$:0,$0:"no",$1:{$:1,$0:new y({$:0,$0:"reject",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};E.QuickYes=function(bW){var bX;return bW==="yes"||(bW==="ok"||(bW==="sure"||(bW==="yeah"||(bW==="yep"||(bW==="uh huh"||(bW==="go ahead"||bW==="go"))))))?{$:1,$0:new B({$:0,$0:"yes",$1:{$:1,$0:new y({$:0,$0:"verify",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};E.QuickHelp=function(bW){var bX;return bW==="help"||(bW==="help me"||(bW==="what's this?"||bW==="huh"))?{$:1,$0:new B({$:0,$0:"help",$1:{$:1,$0:new y({$:0,$0:"help",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};E.QuickHello=function(bW){var bX;return bW==="hello"||(bW==="hey"||(bW==="yo"||bW==="hi"))?{$:1,$0:new B({$:0,$0:"hello",$1:{$:1,$0:new y({$:0,$0:"greet",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};E.Voices=function(bW){return bW==="voices"?{$:1,$0:null}:null;};E.DebugEntry=function(bW){return bE.StartsWith(bW,"debug-entry ")?{$:1,$0:bE.Replace(bW,"debug-entry ","")}:null;};E.DebugBehavioralTraits=function(bW){return bE.StartsWith(bW,"debug-bt ")?{$:1,$0:bE.Replace(bW,"debug-bt ","")}:null;};E.DebugEmotionalTraits=function(bW){return bE.StartsWith(bW,"debug-et ")?{$:1,$0:bE.Replace(bW,"debug-et ","")}:null;};E.DebugTriples=function(bW){return bE.StartsWith(bW,"debug-triples ")?{$:1,$0:bE.Replace(bW,"debug-triples ","")}:null;};E.DebugLemmas=function(bW){return bE.StartsWith(bW,"debug-lemmas ")?{$:1,$0:bE.Replace(bW,"debug-lemmas ","")}:null;};E.DebugEntities=function(bW){return bE.StartsWith(bW,"debug-entities ")?{$:1,$0:bE.Replace(bW,"debug-entities ","")}:null;};E.Debug=function(bW){return bW==="debug"?{$:1,$0:null}:null;};E.Blank=function(bW){return bW===""?{$:1,$0:null}:null;};J.Study=function(bW){return bW.get_Traits()!=null?{$:0,$0:null}:{$:1,$0:null};};x.Number=function(bW){var bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc;return(bY=x.Intent_("1",bW),bY!=null&&bY.$==1&&(bY.$0[0]==null&&(bY.$0[1]==null&&(bX=bW,true))))?{$:1,$0:bH.ParseInt32(bX.get_Intent().$0.get_Name())}:(b0=x.Intent_("2",bW),b0!=null&&b0.$==1&&(b0.$0[0]==null&&(b0.$0[1]==null&&(bZ=bW,true))))?{$:1,$0:bH.ParseInt32(bZ.get_Intent().$0.get_Name())}:(b2=x.Intent_("3",bW),b2!=null&&b2.$==1&&(b2.$0[0]==null&&(b2.$0[1]==null&&(b1=bW,true))))?{$:1,$0:bH.ParseInt32(b1.get_Intent().$0.get_Name())}:(b4=x.Intent_("4",bW),b4!=null&&b4.$==1&&(b4.$0[0]==null&&(b4.$0[1]==null&&(b3=bW,true))))?{$:1,$0:bH.ParseInt32(b3.get_Intent().$0.get_Name())}:(b6=x.Intent_("5",bW),b6!=null&&b6.$==1&&(b6.$0[0]==null&&(b6.$0[1]==null&&(b5=bW,true))))?{$:1,$0:bH.ParseInt32(b5.get_Intent().$0.get_Name())}:(b8=x.Intent_("6",bW),b8!=null&&b8.$==1&&(b8.$0[0]==null&&(b8.$0[1]==null&&(b7=bW,true))))?{$:1,$0:bH.ParseInt32(b7.get_Intent().$0.get_Name())}:(b_=x.Intent_("7",bW),b_!=null&&b_.$==1&&(b_.$0[0]==null&&(b_.$0[1]==null&&(b9=bW,true))))?{$:1,$0:bH.ParseInt32(b9.get_Intent().$0.get_Name())}:(ca=x.Intent_("8",bW),ca!=null&&ca.$==1&&(ca.$0[0]==null&&(ca.$0[1]==null&&(b$=bW,true))))?{$:1,$0:bH.ParseInt32(b$.get_Intent().$0.get_Name())}:(cc=x.Intent_("9",bW),cc!=null&&cc.$==1&&(cc.$0[0]==null&&(cc.$0[1]==null&&(cb=bW,true))))?{$:1,$0:bH.ParseInt32(cb.get_Intent().$0.get_Name())}:null;};x.StrA=function(bW){if(bW!=null&&bW.$==1)try{return{$:1,$0:((bJ.DecodeArray(bJ.Id()))())(bK.parse(bW.$0))};}catch(bX){return null;}else return null;};x.PStr=function(bW){var bX;return bW!=null&&bW.$==1&&(typeof bW.$0=="string"&&(bX=bW.$0,true))?{$:1,$0:bX}:null;};x.No=function(bW){var bX,bY;return(bY=x.Intent_("reject",bW),bY!=null&&bY.$==1&&(bY.$0[0]==null&&(bY.$0[1]==null&&(bX=bW,true))))?{$:1,$0:bX}:null;};x.Yes=function(bW){var bX,bY;return(bY=x.Intent_("verify",bW),bY!=null&&bY.$==1&&(bY.$0[0]==null&&(bY.$0[1]==null&&(bX=bW,true))))?{$:1,$0:bX}:null;};x.EntityManyofMany=function(bW,bX){return{$:1,$0:bM.OfArray(bm.ofSeq(bA.map(function(bY){return bA.exists(function(bZ){return bZ.get_Role()===bY;},bX)?[bY,{$:1,$0:bA.filter(function(bZ){return bZ.get_Role()===bY;},bX)}]:[bY,null];},bW)))};};x.EntityManyOf1=function(bW,bX){var bY;return bX!=null&&bX.$==1&&(bA.exists(function(bZ){return bZ.get_Role()===bW;},bX.$0)&&(bY=bX.$0,true))?{$:1,$0:bA.filter(function(bZ){return bZ.get_Role()===bW;},bY)}:null;};x.Entity1OfAny=function(bW,bX){var bY;return bX!=null&&bX.$==1&&(bA.exists(function(bZ){return bZ.get_Role()===bW;},bX.$0)&&(bY=bX.$0,true))?{$:1,$0:bA.head(bA.sortBy(function(bZ){return bZ.get_Role();},bA.filter(function(bZ){return bZ.get_Role()===bW;},bY)))}:null;};x.Entity1Of1=function(bW,bX){var bY,bZ;return bX!=null&&bX.$==1&&(bX.$0.$==1&&(bX.$0.$1.$==0&&((bZ=bX.$0.$0,bZ.get_Role()===bW||bZ.get_Name()===bW)&&(bY=bX.$0.$0,true))))?{$:1,$0:bY}:null;};x.Intent_=function(bW,bX){return bX.get_Intent()!=null&&bX.get_Intent().$0.get_Name()===bW?{$:1,$0:[bX.get_Traits(),bX.get_Entities()]}:null;};x.quick_number=function(bW){return new B({$:0,$0:"",$1:{$:1,$0:new y({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bA.ofArray([new A({$:0,$0:"wit/ordinal",$1:"",$2:a.String(bW),$3:{$:1,$0:1}})])}});};x.quick_utter=function(bW){return new B({$:0,$0:"",$1:{$:1,$0:new y({$:0,$0:bW,$1:{$:1,$0:1}})},$2:null,$3:null});};K.$cctor=function(){K.$cctor=a.ignore;K.agenda_entry_entity_types=bA.ofArray(["wit$agenda_entry:agenda_entry"]);K.contact_entity_types=bA.ofArray(["wit$contact:contact","wit$contact:query_param_name"]);K.datetime_entity_types=bA.ofArray(["wit$datetime:datetime","wit$datetime:query_param_date"]);K.local_search_query_entity_types=bA.ofArray(["wit$local_search_query:local_search_query","wit$datetime:query_resource"]);K.entity_types=bA.append(E.agenda_entry_entity_types(),bA.append(E.contact_entity_types(),bA.append(E.datetime_entity_types(),E.local_search_query_entity_types())));K.trait_types=bA.ofArray(["domain","dialogue_act"]);K.intentConfidenceThreshold=0.85;K.entityConfidenceThreshold=0.85;};M=L.EmotionalTrait=bp.Class({get_Frequency:function(){return this.$2;},get_Hierarchy:function(){return this.$1;},get_Label:function(){return this.$0;}},null,M);N=L.BehavioralTrait=bp.Class({get_Frequency:function(){return this.$2;},get_Hierarchy:function(){return this.$1;},get_Label:function(){return this.$0;}},null,N);O=L.Relation=bp.Class({toString:function(){return((((bp.Curried(function(bW,bX,bY,bZ){return bW("("+bw.prettyPrint(bX)+", "+bw.prettyPrint(bY)+", "+bw.prettyPrint(bZ)+")");},4))(a.id))(this.get_T1()))(this.get_Name()))(this.get_T2());},get_T2:function(){return this.$2;},get_Name:function(){return this.$1;},get_T1:function(){return this.$0;}},null,O);P=L.Triple=bp.Class({toString:function(){return((((bp.Curried(function(bW,bX,bY,bZ){return bW("("+bj.p$5(bX)+", "+bj.p$7(bY)+", "+bj.p$21(bZ)+")");},4))(a.id))(this.get_Subject()))(this.get_Verb()))(this.get_Object());},get_Object:function(){var bW;bW=this.$1;return bW!=null?{$:1,$0:bW.$0.get_T2()}:null;},get_Verb:function(){return this.$0.get_T2();},get_Subject:function(){return this.$0.get_T1();}},null,P);Q=L.Subject=bp.Class({toString:function(){return this.$==1?a.String(this.$0):this.$0;}},null,Q);R=L.Verb=bp.Class({toString:function(){return this.$0;}},null,R);S=L.Object=bp.Class({toString:function(){return this.$==1?a.String(this.$0):this.$0;}},null,S);T=L.ExpertAIEntity=bp.Class({get_Relevance:function(){return this.$3;},get_Positions:function(){return this.$2;},get_Lemma:function(){return this.$1;},get_Type:function(){return this.$0;}},null,T);U=L.ExpertAILemma=bp.Class({get_Positions:function(){return this.$2;},get_Score:function(){return this.$1;},get_Value:function(){return this.$0;}},null,U);V.New=function(bW,bX,bY,bZ,b0,b1,b2,b3,b4){return{UserName:bW,Date:bX,WritingPrompt:bY,Text:bZ,KnowledgeTriples:b0,KnowledgeLemmas:b1,KnowledgeEntities:b2,KnowledgeBehaviouralTraits:b3,KnowledgeEmotionalTraits:b4};};L.ExpertAIEntity1OfAnyType=function(bW,bX){return bX==null?null:bD.tryPick(function(bY){var bZ;return(bZ=L.ExpertAIEntityType(bW,bY.$0),bZ!=null&&bZ.$==1)?{$:1,$0:bY}:null;},bX.$0);};L.EmotionalTrait1OfAny=function(bW,bX){return bD.tryPick(function(bY){var bZ;return(bZ=L.EmotionalTraitLabel(bW,bY.$0),bZ!=null&&bZ.$==1)?{$:1,$0:bY}:null;},bX);};L.SubjectVerbObject1OfAny=function(bW,bX,bY,bZ,b0,b1){return b1==null?null:bD.tryPick(function(b2){var b3,b4,b5,b6,b7,b8,b9,b_;return(b4=L.TripleSubject(bW,b2.$0.$0),b4!=null&&b4.$==1)&&((b5=L.TripleRelation(bX,b2.$0.$1),b5!=null&&b5.$==1)&&((b6=L.TripleVerb(bY,b2.$0.$2),b6!=null&&b6.$==1)&&((b7=b2.$1,b7!=null&&b7.$==1)&&((b8=L.TripleVerb(bY,b2.$1.$0.$0),b8!=null&&b8.$==1)&&((b9=L.TripleRelation(bZ,b2.$1.$0.$1),b9!=null&&b9.$==1)&&(b_=L.TripleObject(b0,b2.$1.$0.$2),b_!=null&&b_.$==1))))))?{$:1,$0:b2}:null;},b1.$0);};L.SubjectVerb1OfAny=function(bW,bX,bY,bZ){return bZ==null?null:bD.tryPick(function(b0){var b1,b2,b3,b4;return(b2=L.TripleSubject(bW,b0.$0.$0),b2!=null&&b2.$==1)&&((b3=L.TripleRelation(bX,b0.$0.$1),b3!=null&&b3.$==1)&&(b4=L.TripleVerb(bY,b0.$0.$2),b4!=null&&b4.$==1))?{$:1,$0:b0}:null;},bZ.$0);};L.EmotionalTraitLabel=function(bW,bX){return bX.toUpperCase()===bW.toUpperCase()?{$:1,$0:null}:null;};L.ExpertAIEntityType=function(bW,bX){return bX.toUpperCase()===bW.toUpperCase()?{$:1,$0:null}:null;};L.TripleObject=function(bW,bX){var bY;return bX.$==0&&(bX.$0.toUpperCase()===bW.toUpperCase()&&(bY=bX.$0,true))?{$:1,$0:null}:null;};L.TripleVerb=function(bW,bX){return bX.$0.toUpperCase()===bW.toUpperCase()?{$:1,$0:null}:null;};L.TripleRelation=function(bW,bX){return bX.toUpperCase()===bW.toUpperCase()?{$:1,$0:null}:null;};L.TripleSubject=function(bW,bX){var bY;return bX.$==0&&(bX.$0.toUpperCase()===bW.toUpperCase()&&(bY=bX.$0,true))?{$:1,$0:null}:null;};X.MicReady={$:5};X.MicAudioEnd={$:4};X.MicAudioStart={$:3};X.MicDisconnected={$:2};X.MicConnecting={$:1};X.MicNotInitialized={$:0};Y.ClientUnderstand={$:2};Y.ClientReady={$:1};Y.ClientNotInitialzed={$:0};Z=W.Interpreter=bp.Class({get_Options:function(){return(this.get_Unwrap())[2];},get_Text:function(){return(this.get_Unwrap())[1];},get_Voice:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1[0],this.$1[1]];}},null,Z);_0=W.CUI=bp.Class({ListMenuItems:function(bW,bX){var bY,bZ;bY=(bZ=bA.max(bA.map(function(b0){return b0.length;},bW)),(function(b0){return function(b1){return b0("width:"+a.String(b1)+"em");};}(a.id))(bZ));this.EchoDoc(bs.Element("div",[d.cls("list-group"),bt.Create("style",bY)],bA.mapi(function(b0,b1){var b2;b2=a.String(b0+1);return bs.Element("a",[d.cls("list-group-item list-group-item-action"),d.href("javascript:;"),bt.HandlerImpl("click",function(){return function(){return bX(b2,b2);};})],[bs.Element("span",[d.cls("badge bg-light rounded-pill")],[bs.TextNode(b2)]),bs.TextNode(b1)]);},bW)));},SayVoices:function(){var bW,bX,bY;bW=this;bX=a.speechSynthesis.getVoices();if(!(bX==null)){bY=d.toArray(bX);bW.Say$1((function(bZ){return function(b0){return bZ("There are currently "+a.String(b0)+" voices installed on this computer or device.");};}(a.id))(bm.length(bY)));bm.iteri(function(bZ,b0){return bW.Say$1(((((bp.Curried(function(b1,b2,b3,b4){return b1("Voice "+a.String(b2)+". Name: "+bw.toSafe(b3)+", Local: "+bw.prettyPrint(b4)+".");},4))(a.id))(bZ))(b0.name))(b0.localService));},bY);}},Wait:function(bW){this.Wait$1(function(){bC.Start(bW,null);});},Wait$1:function(bW){this["Echo'"]("please wait...");this.Term.pause();bW();this.Term.resume();},sayRandom:function(bW,bX){this.Say$1(v.getRandomPhrase(bW,bX));},SayAngry:function(bW){var bX,bY;bX=this;bC.Start((bY=null,bC.Delay(function(){return bC.Combine(a.speechSynthesis.speaking?(a.speechSynthesis.cancel(),bN.chime(),bC.Zero()):bC.Zero(),bC.Delay(function(){a.addMessage(bX.Avatar,bW,"","");bX.Avatar.processMessages(0);return bC.Zero();}));})),null);},EchoDoc:function(bW){var bX,bY;bm.get(by(".terminal-output").get(),0).childNodes.length;bX=bs.Element("div",[bt.Create("style","margin-bottom:1em")],[bW]);bY=d.terminalOutput();bv.LoadLocalTemplates("");bs.RunAppend(bY,bX);},Say:function(bW){var bX,bY;function bZ(){return a.speechSynthesis;}bX=this;bC.Start((bY=null,bC.Delay(function(){var b0;b0=bZ();return bC.Combine(bC.While(function(){return b0.speaking||b0.pending;},bC.Delay(function(){return bC.Bind(bC.Sleep(1000),function(){return bC.Return(null);});})),bC.Delay(function(){bX.Avatar.addMessage(bA.reduce(function(b1,b2){return b1+b2;},bA.map(function(b1){return b1+" ";},bW)));bX.Avatar.processMessages(0);return bC.Zero();}));})),null);},Say$1:function(bW){var bX,bY;function bZ(){return a.speechSynthesis;}bX=this;bC.Start((bY=null,bC.Delay(function(){var b0;b0=bZ();return bC.Combine(bC.While(function(){return b0.speaking||b0.pending;},bC.Delay(function(){return bC.Bind(bC.Sleep(1000),function(){return bC.Return(null);});})),bC.Delay(function(){bX.Avatar.addMessage(bW);bX.Avatar.processMessages(0);return bC.Zero();}));})),null);},Debug:function(bW,bX){d.debug(bW,bX);},"EchoHtml'":function(bW){var bX,bY;bX=(bY={},bY.raw=true,bY);this.Term.disable();this.Term.echo(bW,bX);this.Term.enable();},"Echo'":function(bW){this.Term.disable();this.Term.echo(bW);this.Term.enable();}},null,_0);_0.ListMenuItems$106$95=function(bW,bX){return function(){return function(){return(bW(bX))(bX);};};};_0.New=function(bW,bX,bY,bZ,b0,b1,b2){return new _0({Voice:bW,Mic:bX,Term:bY,Avatar:bZ,Caption:b0,AudioHandlers:b1,TypingDNA:b2});};_1=c.Dialogue=bp.Class({get_Utterances:function(){return this.$4;},get_Output:function(){return this.$3;},get_DialogueQuestions:function(){return this.$2;},get_Props:function(){return this.$1;},get_Cui:function(){return this.$0;}},null,_1);_2=c.Question=bp.Class({toString:function(){return((((bp.Curried(function(bW,bX,bY,bZ){return bW("Name: "+bw.toSafe(bX)+" Module: "+bw.toSafe(bY)+" Type: "+bj.p$22(bZ)+" ");},4))(a.id))(this.get_Name()))(this.get_Module()))(this.get_Type());},get_Target:function(){return this.$4;},get_Params:function(){return this.$3;},get_Type:function(){return this.$2;},get_Module:function(){return this.$1;},get_Name:function(){return this.$0;}},null,_2);_3.ConceptCompletion={$:5};_3.Disjunctive={$:4};_4["Response'_"]=function(bW,bX,bY){var bZ,b0,b1,b2,b3,b4,b5,b6;return(b0=_4.PropNotSet_(bW,"user",bY),b0!=null&&b0.$==1?(b1=_4.Form(bW,bX,b0.$0),b1!=null&&b1.$==1?(bZ=b1.$0,true):(b2=_4.PropNotSet_(bW,"user",bY),b2!=null&&b2.$==1&&(b3=_4.NotForm(bW,bX,b2.$0),b3!=null&&b3.$==1&&(bZ=b3.$0,true)))):(b4=_4.PropNotSet_(bW,"user",bY),b4!=null&&b4.$==1&&(b5=_4.NotForm(bW,bX,b4.$0),b5!=null&&b5.$==1&&(bZ=b5.$0,true))))?(b6=_4.have(bW,bX)?{$:1,$0:_4.prop(bW,bX)}:null,bZ.get_Text()!==""?{$:1,$0:[bZ,{$:1,$0:bZ.get_Text()},b6]}:{$:1,$0:[bZ,null,b6]}):null;};_4.Response_=function(bW,bX,bY){var bZ,b0,b1,b2,b3,b4,b5,b6;return(b0=_4.PropSet_(bW,"user",bY),b0!=null&&b0.$==1?(b1=_4.Form(bW,bX,b0.$0),b1!=null&&b1.$==1?(bZ=b1.$0,true):(b2=_4.PropSet_(bW,"user",bY),b2!=null&&b2.$==1&&(b3=_4.NotForm(bW,bX,b2.$0),b3!=null&&b3.$==1&&(bZ=b3.$0,true)))):(b4=_4.PropSet_(bW,"user",bY),b4!=null&&b4.$==1&&(b5=_4.NotForm(bW,bX,b4.$0),b5!=null&&b5.$==1&&(bZ=b5.$0,true))))?(b6=_4.have(bW,bX)?{$:1,$0:_4.prop(bW,bX)}:null,bZ.get_Text()!==""?{$:1,$0:[bZ,{$:1,$0:bZ.get_Text()},b6]}:{$:1,$0:[bZ,null,b6]}):null;};_4.NotForm=function(bW,bX,bY){return bW.get_DialogueQuestions().length>0&&(bW.get_DialogueQuestions())[0].get_Name()===bX&&bY.get_Text()!==""?{$:1,$0:bY}:null;};_4.Form=function(bW,bX,bY){return bW.get_DialogueQuestions().length>0&&(bW.get_DialogueQuestions())[0].get_Name()===bX&&bY.get_Intent()!=null&&bY.get_Intent().$0.get_Name()===bX&&bO.Equals(bY.get_Intent().$0.get_Confidence(),{$:1,$0:1})&&bO.Equals(bY.get_Traits(),null)&&bO.Equals(bY.get_Entities(),null)?{$:1,$0:bY}:null;};_4["Intent'_"]=function(bW,bX,bY){var bZ,b0,b1;return(b0=_4.PropNotSet_(bW,"user",bY),b0!=null&&b0.$==1&&((b1=b0.$0,b1.get_Intent()!=null&&b1.get_Intent().$0.get_Name()===bX)&&(bZ=b0.$0,true)))?{$:1,$0:[bZ.get_Traits(),bZ.get_Entities()]}:null;};_4.Intent_=function(bW,bX,bY){var bZ,b0,b1;return(b0=_4.PropSet_(bW,"user",bY),b0!=null&&b0.$==1&&((b1=b0.$0,b1.get_Intent()!=null&&b1.get_Intent().$0.get_Name()===bX)&&(bZ=b0.$0,true)))?{$:1,$0:[bZ.get_Traits(),bZ.get_Entities()]}:null;};_4["User'_"]=function(bW,bX){var bY,bZ;return(bZ=_4.PropNotSet_(bW,"user",bX),bZ!=null&&bZ.$==1&&(bW.get_DialogueQuestions().length===0&&(bY=bZ.$0,true)))?{$:1,$0:bY}:null;};_4.User_=function(bW,bX){var bY,bZ;return(bZ=_4.PropSet_(bW,"user",bX),bZ!=null&&bZ.$==1&&(bW.get_DialogueQuestions().length===0&&(bY=bZ.$0,true)))?{$:1,$0:bY}:null;};_4.PropNotSet_=function(bW,bX,bY){return!_4.have(bW,bX)?{$:1,$0:bY}:null;};_4.PropSet_=function(bW,bX,bY){return _4.have(bW,bX)?{$:1,$0:bY}:null;};_4.Agenda_=function(bW,bX,bY,bZ){return bW.get_DialogueQuestions().length>0&&(bW.get_DialogueQuestions())[0].get_Module()===bY?{$:1,$0:null}:null;};_4.debugInterpreterEnd=function(bW,bX,bY){bX(((((bp.Curried(function(bZ,b0,b1,b2){return bZ(bw.toSafe(b0)+" ending utterances:"+bw.prettyPrint(b1)+", questions: "+bw.prettyPrint(b2)+".");},4))(a.id))(bY))(bW.get_Utterances()))(bW.get_DialogueQuestions()));};_4.debugInterpreterStart=function(bW,bX,bY){bX(((((bp.Curried(function(bZ,b0,b1,b2){return bZ(bw.toSafe(b0)+" starting utterances:"+bw.prettyPrint(b1)+", questions: "+bw.prettyPrint(b2)+".");},4))(a.id))(bY))(bW.get_Utterances()))(bW.get_DialogueQuestions()));};_4.frame=function(bW){return bA.ofSeq(bD.take(bW.length>=5?5:bW.length,bW));};_4.didNotUnderstand=function(bW,bX,bY){bX((function(bZ){return function(b0){return bZ(bw.toSafe(b0)+" interpreter did not understand utterance.");};}(a.id))(bY));_4.popu(bW,bX);_4.say(bW,"Sorry I didn't understand what you meant.");!_4.have(bW,"user")?_4.say(bW,"You must login to use most functions in Selma."):void 0;};_4["endt'"]=function(bW,bX,bY){var bZ;bZ=(bW.get_DialogueQuestions())[0];_4.popu(bW,bX);_4.popq(bW,bX);bX((function(b0){return function(b1){return b0("End turn "+bw.toSafe(b1)+".");};}(a.id))(bZ.get_Name()));bY();};_4.endt=function(bW,bX,bY,bZ){_4.popu(bW,bX);_4.popq(bW,bX);_4.have(bW,bY)?_4.remove(bW,bX,bY):void 0;bX((function(b0){return function(b1){return b0("End turn "+bw.toSafe(b1)+".");};}(a.id))(bY));bZ();};_4.cancel=function(bW,bX,bY){var bZ;bZ=(bW.get_DialogueQuestions())[0];if(bZ.get_Name()!==bY)(((bp.Curried3(function(b0,b1,b2){return b0(bj.p$27(b1)+" at the top of the stack does not have the name "+bw.toSafe(b2)+".");}))(bq.FailWith))(bZ))(bY);_4.popq(bW,bX);bX((function(b0){return function(b1){return b0("Cancel "+bj.p$27(b1)+".");};}(a.id))(bZ));};_4["trigger'"]=function(bW,bX,bY,bZ,b0,b1){_4.pushu(bW,bX,new B({$:0,$0:bK.stringify(b0),$1:{$:1,$0:new y({$:0,$0:bZ,$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:b1}}));bY(bW);};_4.trigger=function(bW,bX,bY,bZ,b0){_4.pushu(bW,bX,new B({$:0,$0:bK.stringify(b0),$1:{$:1,$0:new y({$:0,$0:bZ,$1:{$:1,$0:1}})},$2:null,$3:null}));bY(bW);};_4.handle=function(bW,bX,bY,bZ){_4.popu(bW,bX);bX((function(b0){return function(b1){return b0("Handle utterance "+bw.toSafe(b1)+".");};}(a.id))(bY));bZ();};_4.dispatch=function(bW,bX,bY,bZ){bX(((((bp.Curried(function(b0,b1,b2,b3){return b0("Dispatch to module "+bw.toSafe(b1)+" utterances: "+bw.prettyPrint(b2)+" questions: "+bw.prettyPrint(b3)+".");},4))(a.id))(bY))(bW.get_Utterances()))(bW.get_DialogueQuestions()));bZ(bW);};_4.popq=function(bW,bX){var bY;bY=bW.get_DialogueQuestions().shift();bX((function(bZ){return function(b0){return bZ("Pop "+bj.p$27(b0)+".");};}(a.id))(bY));};_4.pushq=function(bW,bX,bY){bW.get_DialogueQuestions().unshift(bY);bX((function(bZ){return function(b0){return bZ("Push "+bj.p$27(b0)+".");};}(a.id))(bY));};_4.popu=function(bW,bX){var bY;bY=bW.get_Utterances().shift();bX((function(bZ){return function(b0){return bZ("Pop "+bj.p$13(b0)+".");};}(a.id))(bY));};_4.pushu=function(bW,bX,bY){bX((function(bZ){return function(b0){return bZ("Push "+bj.p$13(b0)+".");};}(a.id))(bY));bW.get_Utterances().unshift(bY);};_4.remove=function(bW,bX,bY){bX((function(bZ){return function(b0){return bZ("Remove property "+bw.toSafe(b0)+".");};}(a.id))(bY));bW.get_Props().Remove(bY);};_4.add=function(bW,bX,bY,bZ){bW.get_Props().Add(bY,bZ);bX((((bp.Curried3(function(b0,b1,b2){return b0("Add property "+bw.toSafe(b1)+":"+bw.prettyPrint(b2)+".");}))(a.id))(bY))(bZ));};_4.prop=function(bW,bX){return bW.get_Props().ContainsKey(bX)?bW.get_Props().get_Item(bX):(function(bY){return function(bZ){return bY("The "+bw.toSafe(bZ)+" dialogue property does not exist.");};}(bq.FailWith))(bX);};_4.have=function(bW,bX){return bW.get_Props().ContainsKey(bX);};_4["sayRandom'"]=function(bW,bX){_4.sayRandom(bW,bX,"");};_4.sayRandom=function(bW,bX,bY){var bZ;bZ=v.getRandomPhrase(bX,bY);bW.get_Output().unshift(bZ);bW.get_Cui().Say$1(bZ);};_4.say=function(bW,bX){bW.get_Output().unshift(bX);_4["say'"](bW,bX);};_4["say'"]=function(bW,bX){bW.get_Cui().Say$1(bX);};_4.echo=function(bW,bX){(bW.get_Cui())["EchoHtml'"](bX);};_5.userAuthenticationDialog=function(bW,bX,bY,bZ){var b0,b1,b2;function b3(b8){_4.say(bW,b8);}function b4(b8){b8.input="text";b8.showCancelButton=true;b8.confirmButtonText="Ok";}function b5(b8){b8.confirmButtonClass="invisible";b8.showCancelButton=true;}function b6(){var b8;b8=d.createDialogueBoxCanvas();d.startCamera(self.document.body,b8);}function b7(b8){var b9,b_;b9=b8[0];b_=b8[1];d.questionBox("Biometric Authentication","",{$:1,$0:d.boxesWithTitles(["2","3"])},{$:1,$0:[640,480]},{$:1,$0:b4},{$:1,$0:b6},function(b$){var ca,cb,cc,cd;if(b$.isConfirmed){ca=bW.get_Cui().TypingDNA.getTypingPattern((cb={},cb.type=1,cb.text=b2,cb.caseSensitive=false,cb));cc=b$.value;cd=d.getCameraCanvas().toDataURL();bX((function(ce){return function(cf){return ce("User image is "+bw.toSafe(cf)+"...");};}(a.id))(bE.Substring(cd,0,10)));d.stopCamera();bX((((bp.Curried3(function(ce,cf,cg){return ce("User entered typing pattern "+bw.toSafe(cf)+" for text "+bw.toSafe(cg));}))(a.id))(ca))(cc));cc.toLowerCase()!==b2.toLowerCase()?(b3("Sorry you did not enter the passphrase correctly. Please try again."),b7([b9,b_])):d.questionBox("Biometric Authentication","",null,null,{$:1,$0:b5},{$:1,$0:function(){d.getDialogueBoxContent().appendChild(d.getMic());bW.get_Cui().AudioHandlers.Add("VoiceAuthentication",function(ce){bK.stringify(((bJ.Id())())(ce));d.confirmQuestionBox();});}},function(ce){if(!ce.isConfirmed){bW.get_Cui().AudioHandlers.Remove("VoiceAuthentication");b3("OK but you must login for me to help you.");}});}else b3("OK but you must login for me to help you.");});}b0=bY.get_Target();b1=bY.get_Name();b2=(function(b8){return function(b9){return b8("Hello my name is "+bw.toSafe(b9)+" and I am an administrator");};}(a.id))(bZ);b3((function(b8){return function(b9){return b8("Enter the phrase "+bw.toSafe(b9)+".");};}(a.id))(b2));b7([0,[]]);};_6.menu=function(bW,bX,bY,bZ,b0,b1){return new _2({$:0,$0:bY,$1:bX,$2:{$:2,$0:bZ,$1:b1},$3:null,$4:function(){(bW.get_Cui())["EchoHtml'"](b0);bW.get_Cui().Say$1(b0);}});};_6.ask=function(bW,bX,bY){var bZ,b0,b1,b2;_4.pushq(bW,bX,bY);(bY.get_Target())(bW);bZ=bY.get_Type();if(bZ.$==0)_5.userAuthenticationDialog(bW,bX,bY,bZ.$0);else bZ.$==1?(b0=bZ.$0,b1=bZ.$1,bW.get_Cui().EchoDoc(bs.Concat([bs.TextNode("    "),g.btnPrimary("Yes",function(){return function(){bW.get_Cui().Term.enable();return b0();};}),bs.TextNode("     "),g.btnSecondary("No",function(){return function(){bW.get_Cui().Term.enable();return b1();};})])),bW.get_Cui().Term.disable()):bZ.$==2?(b2=bZ.$1,bW.get_Cui().ListMenuItems(bZ.$0,function(b3,b4){return(b2(b3))(b4);}),bW.get_Cui().EchoDoc(bs.Concat([g.btnInfo("Help",function(){return function(){return(b2("help"))("help");};}),bs.TextNode("    "),g.btnSecondary("Cancel",function(){return function(){return(b2("cancel"))("cancel");};})]))):bZ.$==3?void 0:void 0;self.scrollTo(0,bq.toInt(self.document.body.scrollHeight));};_7.update=function(bW){var bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6;function b7(b9){_4.say(bW,b9);}function b8(b9,b_){return _4.Intent_(bW,b9,b_);}_4.debugInterpreterStart(bW,function(b9){_7.debug(b9);},_7.name());bX=_4.frame(bW.$4);if(bX.$==1&&(bZ=x.Yes(bX.$0),bZ!=null&&bZ.$==1&&((b0=_4.Response_(bW,"painVideo",bZ.$0),b0!=null&&b0.$==1)&&bX.$1.$==0)))bW.$0["EchoHtml'"]("<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/SkAqOditKN0\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>");else bX.$==1&&(b2=b8("medjournal",bX.$0),b2!=null&&b2.$==1&&((b3=b2.$0[1],b3!=null&&b3.$==1)&&(bX.$1.$==0&&(b1=b2.$0[1].$0,true))))?(b7("ok I added that entry to your medication journal."),b7("You should be careful not to take too many painkillers over a short period of time.")):bX.$==1&&(b5=_4.User_(bW,bX.$0),b5!=null&&b5.$==1&&((b6=b8("kbquery",b5.$0),b6!=null&&b6.$==1)&&(bX.$1.$==0&&(b4=b5.$0,true))))?void 0:_4.didNotUnderstand(bW,function(b9){_7.debug(b9);},_7.name());_4.debugInterpreterEnd(bW,function(b9){_7.debug(b9);},_7.name());};_7.debug=function(bW){d.debug(_7.name(),bW);};_7.name=function(){_8.$cctor();return _8.name;};_8.$cctor=function(){_8.$cctor=a.ignore;_8.name="Symptoms";};_9.update$241$96=bp.Curried3(function(bW,bX,bY){return(bW("3"))("3");});_9.update$239$96=bp.Curried3(function(bW,bX,bY){return(bW("2"))("2");});_9.update$237$96=bp.Curried3(function(bW,bX,bY){return(bW("1"))("1");});_9.update$199$96=bp.Curried3(function(bW,bX,bY){return(bW("3"))("3");});_9.update$197$96=bp.Curried3(function(bW,bX,bY){return(bW("2"))("2");});_9.update$195$96=bp.Curried3(function(bW,bX,bY){return(bW("1"))("1");});_9.update=function(bW){var bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK;function cL(cY){_4.echo(bW,cY);}function cM(cY){_4.say(bW,cY);}function cN(cY){bX.EchoDoc(cY);}function cO(cY){return _4.prop(bW,cY);}function cP(cY,cZ){return _4.add(bW,function(c0){_9.debug(c0);},cY,cZ);}function cQ(cY){_9.debug(cY);}function cR(){_4.popu(bW,function(cY){_9.debug(cY);});}function cS(cY){_9.debug(cY);}function cT(cY){_9.update(cY);}function cU(cY){return _4.User_(bW,cY);}function cV(cY,cZ){return _4.Intent_(bW,cY,cZ);}function cW(){var cY,cZ,c0,c1,c2,c3,c4,c5,c6;cY=cO("journalentry_text");cZ=cO("journalentry_writingprompt");c0=cO("journalentry_triples");c1=cO("journalentry_mainlemmas");c2=cO("journalentry_entities");c3=cO("journalentry_emotionaltraits");c4=cO("journalentry_behaviouraltraits");cM(a.String(cZ));bY("journalentry_behaviouraltraits");bY("journalentry_emotionaltraits");bY("journalentry_entities");bY("journalentry_mainlemmas");bY("journalentry_triples");bY("journalentry_writingprompt");bY("journalentry_text");bY("journalentry");c5=V.New("l",bP.now(),cZ,cY,c0,c1,c2,c4,c3);bC.Start((c6=null,bC.Delay(function(){return bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.Server.addWritingJournalEntry:356471573",[c5]),function(c7){return c7.$==1?bC.Zero():bC.Zero();});})),null);}function cX(cY){var cZ;cZ=null;return bC.Delay(function(){cP("journalentry_text",cY);return bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.Server.getTriples:2131326930",[cY]),function(c0){var c1;return c0.$==1?bC.Return({$:1,$0:c0.$0}):(c1=c0.$0,(_9.debug((function(c2){return function(c3){return c2("Got "+a.String(c3)+" sentences from NLU server");};}(a.id))(c1.get_Length())),cP("journalentry_triples",c1),cL("Triples:"),bC.Combine(bC.For(c1,function(c2){cL((function(c3){return function(c4){return c3("<span style='color:white;background-color:#00FA9A'>"+bw.printList(function(c5){return bj.p$3(c5);},c4)+"</span>");};}(a.id))(c2));return bC.Zero();}),bC.Delay(function(){return bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.Server.getMainLemmas:1432846847",[cY]),function(c2){var c3,c4;return c2.$==1?(c3=c2.$0,(_9.debug(c3),bC.Return({$:1,$0:c3}))):(c4=c2.$0,bC.Combine(bC.For(c4,function(c5){_9.debug((function(c6){return function(c7){return c6(bj.p$2(c7));};}(a.id))(c5));return bC.Zero();}),bC.Delay(function(){cP("journalentry_mainlemmas",c4);cL("Lemmas:");return bC.Combine(bC.For(c4,function(c5){cL((function(c6){return function(c7){return c6("<span style='color:white;background-color:#FFC0CB'>"+bj.p$2(c7)+"</span>");};}(a.id))(c5));return bC.Zero();}),bC.Delay(function(){return bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.Server.getEntities:2107179380",[cY]),function(c5){var c6,c7;return c5.$==1?(c6=c5.$0,(_9.debug(c6),bC.Return({$:1,$0:c6}))):(c7=c5.$0,bC.Combine(bC.For(c7,function(c8){_9.debug((function(c9){return function(c_){return c9(bj.p$1(c_));};}(a.id))(c8));return bC.Zero();}),bC.Delay(function(){cP("journalentry_entities",c7);cL("Entities:");return bC.Combine(bC.For(c7,function(c8){cL((function(c9){return function(c_){return c9("<span style='color:white;background-color:#7B68EE'>"+bj.p$1(c_)+"</span>");};}(a.id))(c8));return bC.Zero();}),bC.Delay(function(){return bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.Server.getEmotionalTraits:928948127",[cY]),function(c8){var c9,c_;return c8.$==1?(c9=c8.$0,(_9.debug(c9),bC.Return({$:1,$0:c9}))):(c_=c8.$0,bC.Combine(bC.For(c_,function(c$){_9.debug((function(da){return function(db){return da(bj.p$11(db));};}(a.id))(c$));return bC.Zero();}),bC.Delay(function(){cP("journalentry_emotionaltraits",c_);cL("Emotional Traits:");return bC.Combine(bC.For(c_,function(c$){cL((function(da){return function(db){return da("<span style='color:white;background-color:#FF4500'>"+bj.p$11(db)+"</span>");};}(a.id))(c$));return bC.Zero();}),bC.Delay(function(){return bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.Server.getBehavioralTraits:-1969281856",[cY]),function(c$){var da,db;return c$.$==1?(da=c$.$0,(_9.debug(da),bC.Return({$:1,$0:da}))):(db=c$.$0,(cP("journalentry_behaviouraltraits",db),bC.Combine(bC.For(db,function(dc){_9.debug((function(dd){return function(de){return dd(bj.p$12(de));};}(a.id))(dc));return bC.Zero();}),bC.Delay(function(){cL("Behavioral Traits:");return bC.Combine(bC.For(db,function(dc){cL((function(dd){return function(de){return dd("<span style='color:white;background-color:#FFFF00'>"+bj.p$12(de)+"</span>");};}(a.id))(dc));return bC.Zero();}),bC.Delay(function(){return bC.Return({$:0,$0:null});}));}))));});}));})));});}));})));});}));})));});}))));});});}_4.debugInterpreterStart(bW,function(cY){_9.debug(cY);},_9.name());bX=bW.$0;bY=function(cY){_4.remove(bW,cQ,cY);};bZ=bp.Curried(_4.trigger,2,[bW,cS,cT]);b0=bA.ofArray(["Describe a place that makes me feel fearful or angry.","Something happened in the past week that made me feel angry or upset","I remember this dream I had\ufffd"]);b1=bA.ofArray(["Describe the symptoms you are having right now.","Describe the symptoms you have had for the past month.","Describe any symptoms that your condition causes."]);b2=_4.frame(bW.$4);if(b2.$==1&&(b4=cU(b2.$0),b4!=null&&b4.$==1&&(b5=cV("journal",b4.$0),b5!=null&&b5.$==1&&(b5.$0[1]==null&&b2.$1.$==0)))){cM("Choose one of the following the writing prompts:");bX.Say(b0);cL((function(cY){return function(cZ){return cY("1. "+bw.toSafe(cZ));};}(a.id))(b0.get_Item(0)));cL((function(cY){return function(cZ){return cY("2. "+bw.toSafe(cZ));};}(a.id))(b0.get_Item(1)));cL((function(cY){return function(cZ){return cY("3. "+bw.toSafe(cZ));};}(a.id))(b0.get_Item(2)));cN(bs.Concat([bs.Element("ol",[d.cls("pagination")],[bs.Element("li",[d.cls("page-item")],[bs.Element("a",[d.cls("page-link"),d.href("#"),bt.HandlerImpl("click",function(){return function(){return(bZ("1"))("1");};})],[bs.TextNode("1")])]),bs.TextNode("     "),bs.Element("li",[d.cls("page-item")],[bs.Element("a",[d.cls("page-link"),d.href("#"),bt.HandlerImpl("click",function(){return function(){return(bZ("2"))("2");};})],[bs.TextNode("2")])]),bs.TextNode("     "),bs.Element("li",[d.cls("page-item")],[bs.Element("a",[d.cls("page-link"),d.href("#"),bt.HandlerImpl("click",function(){return function(){return(bZ("3"))("3");};})],[bs.TextNode("3")])])])]));}else b2.$==1&&(b7=cU(b2.$0),b7!=null&&b7.$==1&&(b8=x.Number(b7.$0),b8!=null&&b8.$==1&&(b2.$1.$==1&&(b9=cU(b2.$1.$0),b9!=null&&b9.$==1&&(b_=cV("journal",b9.$0),b_!=null&&b_.$==1&&(b_.$0[1]==null&&(b2.$1.$1.$==0&&(b6=b8.$0,true))))))))?b6<=0||b6>3?cM("Choose a writing prompt from 1 to 3."):(cP("journalentry",true),cP("journalentry_writingprompt",b6),cL((function(cY){return function(cZ){return cY("<span style='color:white;background-color:#7B68EE'>"+bw.prettyPrint(cZ)+"</span>");};}(a.id))(b0.get_Item(b6-1))),cM("Enter your journal entry and I'll analyze it and add it to your journal.")):b2.$==1&&(ca=cU(b2.$0),ca!=null&&ca.$==1&&(cb=cV("journal",ca.$0),cb!=null&&cb.$==1&&(cc=x.Entity1Of1("journal_entry",cb.$0[1]),cc!=null&&cc.$==1&&(b2.$1.$==1&&(cd=cU(b2.$1.$0),cd!=null&&cd.$==1&&(ce=x.Number(cd.$0),ce!=null&&ce.$==1&&(b2.$1.$1.$==1&&(cf=cU(b2.$1.$1.$0),cf!=null&&cf.$==1&&(cg=cV("journal",cf.$0),cg!=null&&cg.$==1&&(cg.$0[1]==null&&(b2.$1.$1.$1.$==0&&(b$=[cc.$0,ce.$0],true))))))))))))?(ch=b$[0],cR(),bC.Start((ci=null,bC.Delay(function(){cM("Ok let me analyze what you've written and add that to your journal.");return bC.Bind(cX(ch.get_Value()),function(cY){return cY.$==1?(cM("Sorry I was not able to add your journal entry. Could you try again? Press the up arrow to return to the text you just wrote."),bC.Zero()):(cR(),cR(),cW(),bC.Zero());});})),null)):b2.$==1&&(ck=cU(b2.$0),ck!=null&&ck.$==1&&(cl=cV("symptom_journal",ck.$0),cl!=null&&cl.$==1&&(cl.$0[1]==null&&b2.$1.$==0)))?(cM("Choose one of the following the writing prompts:"),cL("Choose one of the following the writing prompts for your symptom journal:"),bX.Say(b1),cL((function(cY){return function(cZ){return cY("1. "+bw.toSafe(cZ));};}(a.id))(b1.get_Item(0))),cL((function(cY){return function(cZ){return cY("2. "+bw.toSafe(cZ));};}(a.id))(b1.get_Item(1))),cL((function(cY){return function(cZ){return cY("3. "+bw.toSafe(cZ));};}(a.id))(b1.get_Item(2))),cN(bs.Concat([bs.Element("ol",[d.cls("pagination")],[bs.Element("li",[d.cls("page-item")],[bs.Element("a",[d.cls("page-link"),d.href("#"),bt.HandlerImpl("click",function(){return function(){return(bZ("1"))("1");};})],[bs.TextNode("1")])]),bs.TextNode("     "),bs.Element("li",[d.cls("page-item")],[bs.Element("a",[d.cls("page-link"),d.href("#"),bt.HandlerImpl("click",function(){return function(){return(bZ("2"))("2");};})],[bs.TextNode("2")])]),bs.TextNode("     "),bs.Element("li",[d.cls("page-item")],[bs.Element("a",[d.cls("page-link"),d.href("#"),bt.HandlerImpl("click",function(){return function(){return(bZ("3"))("3");};})],[bs.TextNode("3")])])])]))):b2.$==1&&(cn=cU(b2.$0),cn!=null&&cn.$==1&&(co=x.Number(cn.$0),co!=null&&co.$==1&&(b2.$1.$==1&&(cp=cU(b2.$1.$0),cp!=null&&cp.$==1&&(cq=cV("symptom_journal",cp.$0),cq!=null&&cq.$==1&&(cq.$0[1]==null&&(b2.$1.$1.$==0&&(cm=co.$0,true))))))))?cm<=0||cm>3?cM("Choose a writing prompt from 1 to 3."):(cP("journalentry",true),cP("journalentry_writingprompt",cm),cL((function(cY){return function(cZ){return cY("<span style='color:white;background-color:#7B68EE'>"+bw.prettyPrint(cZ)+"</span>");};}(a.id))(b1.get_Item(cm-1))),cM("Enter the symptoms you are having and I'll analyze it and add it to your journal.")):b2.$==1&&(cs=cU(b2.$0),cs!=null&&cs.$==1&&(ct=cV("journal",cs.$0),ct!=null&&ct.$==1&&(cu=x.Entity1Of1("journal_entry",ct.$0[1]),cu!=null&&cu.$==1&&(b2.$1.$==1&&(cv=cU(b2.$1.$0),cv!=null&&cv.$==1&&(cw=x.Number(cv.$0),cw!=null&&cw.$==1&&(b2.$1.$1.$==1&&(cx=cU(b2.$1.$1.$0),cx!=null&&cx.$==1&&(cy=cV("symptom_journal",cx.$0),cy!=null&&cy.$==1&&(cy.$0[1]==null&&(b2.$1.$1.$1.$==0&&(cr=[cu.$0,cw.$0],true))))))))))))?(cz=cr[0],cR(),bC.Start((cA=null,bC.Delay(function(){cM("Ok let me analyze your symptoms.");return bC.Bind(cX(cz.get_Value()),function(cY){return cY.$==1?(cM("Sorry I was not able to add your journal entry. Could you try again? Press the up arrow to return to the text you just wrote."),bC.Zero()):(cR(),cR(),cW(),bC.Zero());});})),null)):b2.$==1&&(cC=x.Yes(b2.$0),cC!=null&&cC.$==1&&((cD=_4.Response_(bW,"painVideo",cC.$0),cD!=null&&cD.$==1)&&b2.$1.$==0))?bX["EchoHtml'"]("<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/SkAqOditKN0\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>"):b2.$==1&&(cF=cU(b2.$0),cF!=null&&cF.$==1&&(cG=cV("medjournal",cF.$0),cG!=null&&cG.$==1&&((cH=cG.$0[1],cH!=null&&cH.$==1)&&(b2.$1.$==0&&(cE=cG.$0[1].$0,true)))))?(cM("ok I added that entry to your medication journal."),cM("You should be careful not to take too many painkillers over a short period of time.")):b2.$==1&&(cJ=cU(b2.$0),cJ!=null&&cJ.$==1&&((cK=cV("kbquery",cJ.$0),cK!=null&&cK.$==1)&&(b2.$1.$==0&&(cI=cJ.$0,true))))?void 0:_4.didNotUnderstand(bW,function(cY){_9.debug(cY);},_9.name());_4.debugInterpreterEnd(bW,function(cY){_9.debug(cY);},_9.name());};_9.debug=function(bW){d.debug(_9.name(),bW);};_9.name=function(){_.$cctor();return _.name;};_.$cctor=function(){_.$cctor=a.ignore;_.name="Journal";};$.update=function(bW){var bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4;function c5(dh){_4.echo(bW,dh);}function c6(dh){_4.say(bW,dh);}function c7(dh){bX.EchoDoc(dh);}function c8(dh,di){return _4.add(bW,function(dj){$.debug(dj);},dh,di);}function c9(){_4.popu(bW,function(dh){$.debug(dh);});}function c_(dh){$.debug(dh);}function c$(dh){$.debug(dh);}function da(dh){$.update(dh);}function db(dh){$.debug(dh);}function dc(dh){$.debug(dh);}function dd(dh,di,dj,dk){return _6.menu(bW,"Tests",dh,di,dj,dk);}function de(dh,di){return _4.Intent_(bW,dh,di);}function df(dh,di){return _4.Response_(bW,dh,di);}function dg(dh){$.debug(dh);}_4.debugInterpreterStart(bW,function(dh){$.debug(dh);},$.name());bX=bW.$0;bY=bp.Curried(_4.handle,2,[bW,c_]);bZ=bp.Curried(_4.trigger,2,[bW,c$,da]);b0=bp.Curried(_4.endt,2,[bW,db]);b1=function(dh){_6.ask(bW,dc,dh);};b2=bp.Curried(_4.trigger,2,[bW,dg,function(dh){_9.update(dh);}]);b3=bA.ofArray(["Physical Health Tests","Mental Health Tests","Cognitive Tests","Psychological Tests"]);b4=bA.ofArray(["Bladder Control Scale","Bowel Control Scale","Modified Fatigue Impact Scale","MOS Pain Effects Scale","Sexual Satisfaction Scale"]);b5=bA.ofArray(["Mental Health Inventory","Modified Social Support Survey"]);b6=bA.ofArray(["Perceived Deficits Questionnaire","Paced Auditory Serial Test","Single Digit Modality Test"]);b7=bA.ofArray(["Beck's Depression Inventory"]);b8=bA.ofArray(["\u2540","\u2560","\u2599","\u25ae","\u25b3","\u25c9","\u25e0","\u25f0","\u2593"]);b9=_4.frame(bW.$4);if(b9.$==1&&((b$=de("list_test_categories",b9.$0),b$!=null&&b$.$==1)&&b9.$1.$==0))(bY("list_test_categories"))(function(){b1(dd("menuTestCategories",b3,"Choose one of the test categories from the list.",bZ));});else b9.$==1&&(cb=df("menuTestCategories",b9.$0),cb!=null&&cb.$==1&&((cc=de("cancel",cb.$0[0]),cc!=null&&cc.$==1)&&b9.$1.$==0))?(b0("menuTestCategories"))(function(){c7(bs.Concat([g.btnPrimary("tests",function(){return function(){return(bZ("list_test_categories"))("list_test_categories");};}),bs.TextNode("     "),g.btnInfo("help",function(){return function(){return(bZ("help"))("help");};})]));}):b9.$==1&&(ce=df("menuTestCategories",b9.$0),ce!=null&&ce.$==1&&(cf=x.Number(ce.$0[0]),cf!=null&&cf.$==1&&(b9.$1.$==0&&(cd=cf.$0,true))))?(b0("menuTestCategories"))(function(){if(cd===1)b1(dd("menuPhysicalHealthTests",b4,"Choose a physical health test from the list.",bZ));else if(cd===2)b1(dd("menuMentalHealthTests",b5,"Choose a mental health test from the list.",bZ));else if(cd===3)b1(dd("menuCognitiveTests",b6,"Choose a cognitive test from the list.",bZ));else if(cd===4)b1(dd("menuPsychologicalTests",b7,"Choose a psychological test from the list.",bZ));else c6("Choose one of the test categories to see a list of tests available.");}):b9.$==1&&(ch=df("menuPhysicalHealthTests",b9.$0),ch!=null&&ch.$==1?(ci=de("cancel",ch.$0[0]),ci!=null&&ci.$==1)?b9.$1.$==0:(cj=df("menuMentalHealthTests",b9.$0),cj!=null&&cj.$==1?(ck=de("cancel",cj.$0[0]),ck!=null&&ck.$==1)?b9.$1.$==0:(cl=df("menuCognitiveTests",b9.$0),cl!=null&&cl.$==1?(cm=de("cancel",cl.$0[0]),cm!=null&&cm.$==1)?b9.$1.$==0:(cn=df("menuPsychologicalTests",b9.$0),cn!=null&&cn.$==1&&((co=de("cancel",cn.$0[0]),co!=null&&co.$==1)&&b9.$1.$==0)):(cp=df("menuPsychologicalTests",b9.$0),cp!=null&&cp.$==1&&((cq=de("cancel",cp.$0[0]),cq!=null&&cq.$==1)&&b9.$1.$==0))):(cr=df("menuCognitiveTests",b9.$0),cr!=null&&cr.$==1?(cs=de("cancel",cr.$0[0]),cs!=null&&cs.$==1)?b9.$1.$==0:(ct=df("menuPsychologicalTests",b9.$0),ct!=null&&ct.$==1&&((cu=de("cancel",ct.$0[0]),cu!=null&&cu.$==1)&&b9.$1.$==0)):(cv=df("menuPsychologicalTests",b9.$0),cv!=null&&cv.$==1&&((cw=de("cancel",cv.$0[0]),cw!=null&&cw.$==1)&&b9.$1.$==0)))):(cx=df("menuMentalHealthTests",b9.$0),cx!=null&&cx.$==1?(cy=de("cancel",cx.$0[0]),cy!=null&&cy.$==1)?b9.$1.$==0:(cz=df("menuCognitiveTests",b9.$0),cz!=null&&cz.$==1?(cA=de("cancel",cz.$0[0]),cA!=null&&cA.$==1)?b9.$1.$==0:(cB=df("menuPsychologicalTests",b9.$0),cB!=null&&cB.$==1&&((cC=de("cancel",cB.$0[0]),cC!=null&&cC.$==1)&&b9.$1.$==0)):(cD=df("menuPsychologicalTests",b9.$0),cD!=null&&cD.$==1&&((cE=de("cancel",cD.$0[0]),cE!=null&&cE.$==1)&&b9.$1.$==0))):(cF=df("menuCognitiveTests",b9.$0),cF!=null&&cF.$==1?(cG=de("cancel",cF.$0[0]),cG!=null&&cG.$==1)?b9.$1.$==0:(cH=df("menuPsychologicalTests",b9.$0),cH!=null&&cH.$==1&&((cI=de("cancel",cH.$0[0]),cI!=null&&cI.$==1)&&b9.$1.$==0)):(cJ=df("menuPsychologicalTests",b9.$0),cJ!=null&&cJ.$==1&&((cK=de("cancel",cJ.$0[0]),cK!=null&&cK.$==1)&&b9.$1.$==0)))))?_4["endt'"](bW,function(dh){$.debug(dh);},function(){b1(dd("menuTestCategories",b3,"Choose one of the test categories from the list.",bZ));}):b9.$==1&&(cM=df("menuCognitiveTests",b9.$0),cM!=null&&cM.$==1&&(cN=x.Number(cM.$0[0]),cN!=null&&cN.$==1&&(b9.$1.$==0&&(cL=cN.$0,true))))?(b0("menuCognitiveTests"))(function(){if(cL===2){c7(bs.TextNode("    "));c6("You last took this test Monday. You're scheduled to take this test agan this week.");c5("The Paced Auditory Serial Addition Test (PASAT) is a measure of cognitive function that\r\n                          specifically assesses auditory information processing speed and flexibility, as well as calculation ability.");c7(bs.Concat([bs.TextNode("     "),g.btnPrimary("start",function(){return function(){return(bZ("start_test_pasat"))("start_test_pasat");};}),bs.TextNode("     "),g.btnInfo("about",function(){return function(){return(bZ("about_test_pasat"))("about_test_pasat");};}),bs.TextNode("     "),g.btnDark("my history",function(){return function(){return(bZ("history_test_pasat"))("history_test_pasat");};}),bs.TextNode("     "),g.btnSecondary("cancel",function(){return function(){return(bZ("cancel"))("cancel");};})]));}else if(cL===3){c7(bs.TextNode("    "));c6("You last took this test Monday. You're scheduled to take this test agan this week.");c5("The Single Digit Modalities Test (SDMT) is a measure of cognitive function that\r\n                          specifically assesses information processing speed and episodic memory.");c7(bs.TextNode("     "));c7(bs.Concat([g.btnPrimary("start",function(){return function(){return(bZ("start_test_sdmt"))("start_test_sdmt");};}),bs.TextNode("     "),g.btnInfo("about",function(){return function(){return(bZ("about_test_sdmt"))("about_test_sdmt");};}),bs.TextNode("     "),g.btnDark("my history",function(){return function(){return(bZ("history_test_sdmt"))("history_test_sdmt");};}),bs.TextNode("     "),g.btnSecondary("cancel",function(){return function(){return(bZ("cancel"))("cancel");};})]));}else c6("Choose a cognitive test from the list.");}):b9.$==1&&((cP=de("start_test_pasat",b9.$0),cP!=null&&cP.$==1)&&b9.$1.$==0)?(bY("start_test_pasat"))(function(){c6("You are going to hear a seriesof single digit numbers that will be presented at the rate of one every 3 seconds. \r\n                                     Listen for the first two numbers, add them up, and tell me your answer. \r\n                                     When you hear the next number, add it to the one you heard right before it. \r\n                                     Continue to add the next number to each preceding one. Remember you are not being asked to give me a running total, but rather the sum of the last two numbers that you heard.");c5("Listen to the instructions and click the Yes button when ready.");b1(new _2({$:0,$0:"verify_start_test_pasat",$1:$.name(),$2:{$:1,$0:function(){(bZ("verify"))("yes");},$1:function(){(bZ("reject"))("no");}},$3:null,$4:function(){c6("Are you ready to begin?");c5("Are you ready to begin?");}}));}):b9.$==1&&(cR=x.Yes(b9.$0),cR!=null&&cR.$==1&&((cS=df("verify_start_test_pasat",cR.$0),cS!=null&&cS.$==1)&&b9.$1.$==0))?(by("#testprofile").removeClass("invisible"),by("#testprofile-name").text("PASAT"),by(self.document.getElementById("#testprofile-timer")).asPieProgress(i.New("pie_progress",0,120,0,120,1200,"linear",function(){var dh,di;dh=bq.toInt(bS.floor(this.now/60));di=bq.toInt(this.now%60);return a.String(dh)+": "+(di>10?a.String(di):"0"+a.String(di));})),by(self.document.getElementById("#testprofile-timer")).asPieProgress("start")):b9.$==1&&((cU=de("start_test_sdmt",b9.$0),cU!=null&&cU.$==1)&&b9.$1.$==0)?(bY("start_test_sdmt"))(function(){c6("You will see a sequence of 9 symbols. Using the symbol-digit key that you see displayed here, enter the 9 digits that match the symbol according to the key.");c5("Listen to the instructions and click the Yes button when ready.");c7(bs.TextNode("    "));b1(new _2({$:0,$0:"verify_start_test_sdmt",$1:$.name(),$2:{$:1,$0:function(){(bZ("verify"))("yes");},$1:function(){(bZ("reject"))("no");}},$3:null,$4:a.ignore}));}):b9.$==1&&(cW=x.Yes(b9.$0),cW!=null&&cW.$==1&&((cX=df("verify_start_test_sdmt",cW.$0),cX!=null&&cX.$==1)&&b9.$1.$==0))?(b0("verify_start_test_sdmt"))(function(){c8("testentry",true);by("#testprofile").hasClass("invisible")?by("#testprofile").removeClass("invisible").addClass("visible"):void 0;c7(bs.Element("table",[d.cls("table table-bordered")],[bs.Element("thead",[],[bs.Element("tr",[],bA.map(function(dh){return bs.Element("th",[bt.Create("scope","col"),bt.Create("style","font-size:300%;text-align:center")],[bs.TextNode(dh)]);},b8))]),bs.Element("tbody",[],[bs.Element("tr",[],bA.mapi(function(dh){return bs.Element("td",[bt.Create("style","font-size:300%;text-align:center")],[bs.TextNode(a.String(dh+1))]);},b8))])]));by(self.document.getElementById("pp1")).asPieProgress(i.New("pie_progress",0,90,0,90,900,"linear",function(){var dh,di;dh=bq.toInt(bS.floor(this.now/60));di=bq.toInt(this.now%60);return a.String(dh)+": "+(di>10?a.String(di):"0"+a.String(di));}));c6("You have 90 seconds to complete this round.");c5("Round 1");c7(bs.Element("table",[d.cls("table table-bordered")],[bs.Element("thead",[],[bs.Element("tr",[],bm.map(function(dh){return bs.Element("th",[bt.Create("scope","col"),bt.Create("style","font-size:300%;text-align:center")],[bs.TextNode(dh)]);},d.shuffleArray(bm.ofList(b8))))])]));c7(bs.Concat([bs.TextNode("    "),g.btnWarning("1",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("2",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("3",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("4",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("5",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("6",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("7",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("8",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("9",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnSuccess("next",function(){return function(){return(bZ("next_test_sdmt"))("next_test_sdmt");};}),bs.TextNode("    "),g.btnDanger("stop",function(){return function(){return(bZ("stop_test_sdmt"))("stop_test_sdmt");};})]));by(self.document.getElementById("pp1")).asPieProgress("start");c6("Enter the 9 digits corresponding to the symbols shown.");}):b9.$==1&&((cZ=de("r_test_sdmt",b9.$0),cZ!=null&&cZ.$==1)&&b9.$1.$==0)?(c9(),c5("Round 2"),by("#testprofile-round").text("Round 2"),c7(bs.Element("table",[d.cls("table table-bordered")],[bs.Element("thead",[],[bs.Element("tr",[],bm.map(function(dh){return bs.Element("th",[bt.Create("scope","col"),bt.Create("style","font-size:300%;text-align:center")],[bs.TextNode(dh)]);},d.shuffleArray(bm.ofList(b8))))])])),c7(bs.Concat([bs.TextNode("    "),g.btnWarning("1",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("2",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("3",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("4",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("5",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("6",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("7",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("8",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("9",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnSuccess("next",function(){return function(){return(bZ("next_test_sdmt"))("next_test_sdmt");};}),bs.TextNode("    "),g.btnDanger("stop",function(){return function(){return(bZ("stop_test_sdmt"))("stop_test_sdmt");};})])),c6("Enter the 9 digits corresponding to the symbols shown.")):b9.$==1&&((c1=de("stop_test_sdmt",b9.$0),c1!=null&&c1.$==1)&&b9.$1.$==0)?(c9(),by(self.document.getElementById("pp1")).asPieProgress("stop"),c7(bs.Concat([g.btnPrimary("knowledge",function(){return function(){return(bZ("list_kb_categories"))("list_kb_categories");};}),bs.TextNode("     "),g.btnPrimary("tests",function(){return function(){return(bZ("list_test_categories"))("list_test_categories");};}),bs.TextNode("     "),g.btnPrimary("symptoms",function(){return function(){return(b2("symptom_journal"))("symptom_journal");};}),bs.TextNode("     "),g.btnPrimary("mood",function(){return function(){return(b2("mood_journal"))("mood_journal");};}),bs.TextNode("     "),g.btnPrimary("caregiver",function(){return function(){return(b2("caregiver_journal"))("caregiver_journal");};}),bs.TextNode("     "),g.btnSecondary("settings",function(){return function(){return(bZ("list_settings_categories"))("list_settings_categories");};}),bs.TextNode("     "),g.btnInfo("help",function(){return function(){return(bZ("help"))("help");};})]))):b9.$==1&&((c3=de("query",b9.$0),c3!=null&&c3.$==1)?b9.$1.$==0:(c4=de("medication_journal",b9.$0),c4!=null&&c4.$==1)&&b9.$1.$==0)?_9.update(bW):_4.didNotUnderstand(bW,function(dh){$.debug(dh);},$.name());_4.debugInterpreterEnd(bW,function(dh){$.debug(dh);},$.name());};$.debug=function(bW){d.debug($.name(),bW);};$.name=function(){ba.$cctor();return ba.name;};ba.$cctor=function(){ba.$cctor=a.ignore;ba.name="Tests";};bb.update=function(bW){var bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1;function c2(de){_4.echo(bW,de);}function c3(de){_4.say(bW,de);}function c4(de){bX.EchoDoc(de);}function c5(de,df){return _4.add(bW,function(dg){bb.debug(dg);},de,df);}function c6(){_4.popu(bW,function(de){bb.debug(de);});}function c7(de){bb.debug(de);}function c8(de){bb.debug(de);}function c9(de){bb.update(de);}function c_(de){bb.debug(de);}function c$(de){bb.debug(de);}function da(de,df,dg,dh){return _6.menu(bW,"Tests",de,df,dg,dh);}function db(de,df){return _4.Intent_(bW,de,df);}function dc(de,df){return _4.Response_(bW,de,df);}function dd(de){bb.debug(de);}_4.debugInterpreterStart(bW,function(de){bb.debug(de);},bb.name());bX=bW.$0;bY=bp.Curried(_4.handle,2,[bW,c7]);bZ=bp.Curried(_4.trigger,2,[bW,c8,c9]);b0=bp.Curried(_4.endt,2,[bW,c_]);b1=function(de){_6.ask(bW,c$,de);};b2=bp.Curried(_4.trigger,2,[bW,dd,function(de){_9.update(de);}]);b3=bA.ofArray(["Physical Health Tests","Mental Health Tests","Cognitive Tests","Psychological Tests"]);bA.ofArray(["Bladder Control Scale","Bowel Control Scale","Modified Fatigue Impact Scale","MOS Pain Effects Scale","Sexual Satisfaction Scale"]);bA.ofArray(["Mental Health Inventory","Modified Social Support Survey"]);bA.ofArray(["Perceived Deficits Questionnaire","Paced Auditory Serial Test","Single Digit Modality Test"]);bA.ofArray(["Beck's Depression Inventory"]);b4=bA.ofArray(["\u2540","\u2560","\u2599","\u25ae","\u25b3","\u25c9","\u25e0","\u25f0","\u2593"]);b5=(new bR.New()).Sync("Nash.Web:Nash.Web.GnuCash.getaccountTypes:-296696751",[]);b6=_4.frame(bW.$4);if(b6.$==1&&((b8=db("list_account_types",b6.$0),b8!=null&&b8.$==1)&&b6.$1.$==0))(bY("list_account_types"))(function(){b1(da("menuAccountTypes",b5,"Choose one of the account types from the list.",bZ));});else b6.$==1&&(b_=dc("menuTestCategories",b6.$0),b_!=null&&b_.$==1&&((b$=db("cancel",b_.$0[0]),b$!=null&&b$.$==1)&&b6.$1.$==0))?(b0("menuTestCategories"))(function(){c4(bs.Concat([g.btnPrimary("tests",function(){return function(){return(bZ("list_test_categories"))("list_test_categories");};}),bs.TextNode("     "),g.btnInfo("help",function(){return function(){return(bZ("help"))("help");};})]));}):b6.$==1&&(cb=dc("menuAccountTypes",b6.$0),cb!=null&&cb.$==1&&(cc=x.Number(cb.$0[0]),cc!=null&&cc.$==1&&(b6.$1.$==0&&(ca=cc.$0,true))))?(b0("menuAccountTypes"))(function(){var de;de=b5.get_Item(ca-1);b1(da("menuAccounts",bA.map(function(df){return df.Name;},(new bR.New()).Sync("Nash.Web:Nash.Web.GnuCash.getAccountsByCategory:1274416399",[de])),"Choose an account from the list.",bZ));}):b6.$==1&&(ce=dc("menuPhysicalHealthTests",b6.$0),ce!=null&&ce.$==1?(cf=db("cancel",ce.$0[0]),cf!=null&&cf.$==1)?b6.$1.$==0:(cg=dc("menuMentalHealthTests",b6.$0),cg!=null&&cg.$==1?(ch=db("cancel",cg.$0[0]),ch!=null&&ch.$==1)?b6.$1.$==0:(ci=dc("menuCognitiveTests",b6.$0),ci!=null&&ci.$==1?(cj=db("cancel",ci.$0[0]),cj!=null&&cj.$==1)?b6.$1.$==0:(ck=dc("menuPsychologicalTests",b6.$0),ck!=null&&ck.$==1&&((cl=db("cancel",ck.$0[0]),cl!=null&&cl.$==1)&&b6.$1.$==0)):(cm=dc("menuPsychologicalTests",b6.$0),cm!=null&&cm.$==1&&((cn=db("cancel",cm.$0[0]),cn!=null&&cn.$==1)&&b6.$1.$==0))):(co=dc("menuCognitiveTests",b6.$0),co!=null&&co.$==1?(cp=db("cancel",co.$0[0]),cp!=null&&cp.$==1)?b6.$1.$==0:(cq=dc("menuPsychologicalTests",b6.$0),cq!=null&&cq.$==1&&((cr=db("cancel",cq.$0[0]),cr!=null&&cr.$==1)&&b6.$1.$==0)):(cs=dc("menuPsychologicalTests",b6.$0),cs!=null&&cs.$==1&&((ct=db("cancel",cs.$0[0]),ct!=null&&ct.$==1)&&b6.$1.$==0)))):(cu=dc("menuMentalHealthTests",b6.$0),cu!=null&&cu.$==1?(cv=db("cancel",cu.$0[0]),cv!=null&&cv.$==1)?b6.$1.$==0:(cw=dc("menuCognitiveTests",b6.$0),cw!=null&&cw.$==1?(cx=db("cancel",cw.$0[0]),cx!=null&&cx.$==1)?b6.$1.$==0:(cy=dc("menuPsychologicalTests",b6.$0),cy!=null&&cy.$==1&&((cz=db("cancel",cy.$0[0]),cz!=null&&cz.$==1)&&b6.$1.$==0)):(cA=dc("menuPsychologicalTests",b6.$0),cA!=null&&cA.$==1&&((cB=db("cancel",cA.$0[0]),cB!=null&&cB.$==1)&&b6.$1.$==0))):(cC=dc("menuCognitiveTests",b6.$0),cC!=null&&cC.$==1?(cD=db("cancel",cC.$0[0]),cD!=null&&cD.$==1)?b6.$1.$==0:(cE=dc("menuPsychologicalTests",b6.$0),cE!=null&&cE.$==1&&((cF=db("cancel",cE.$0[0]),cF!=null&&cF.$==1)&&b6.$1.$==0)):(cG=dc("menuPsychologicalTests",b6.$0),cG!=null&&cG.$==1&&((cH=db("cancel",cG.$0[0]),cH!=null&&cH.$==1)&&b6.$1.$==0)))))?_4["endt'"](bW,function(de){bb.debug(de);},function(){b1(da("menuTestCategories",b3,"Choose one of the test categories from the list.",bZ));}):b6.$==1&&(cJ=dc("menuCognitiveTests",b6.$0),cJ!=null&&cJ.$==1&&(cK=x.Number(cJ.$0[0]),cK!=null&&cK.$==1&&(b6.$1.$==0&&(cI=cK.$0,true))))?(b0("menuCognitiveTests"))(function(){if(cI===2){c4(bs.TextNode("    "));c3("You last took this test Monday. You're scheduled to take this test agan this week.");c2("The Paced Auditory Serial Addition Test (PASAT) is a measure of cognitive function that\r\n                          specifically assesses auditory information processing speed and flexibility, as well as calculation ability.");c4(bs.Concat([bs.TextNode("     "),g.btnPrimary("start",function(){return function(){return(bZ("start_test_pasat"))("start_test_pasat");};}),bs.TextNode("     "),g.btnInfo("about",function(){return function(){return(bZ("about_test_pasat"))("about_test_pasat");};}),bs.TextNode("     "),g.btnDark("my history",function(){return function(){return(bZ("history_test_pasat"))("history_test_pasat");};}),bs.TextNode("     "),g.btnSecondary("cancel",function(){return function(){return(bZ("cancel"))("cancel");};})]));}else if(cI===3){c4(bs.TextNode("    "));c3("You last took this test Monday. You're scheduled to take this test agan this week.");c2("The Single Digit Modalities Test (SDMT) is a measure of cognitive function that\r\n                          specifically assesses information processing speed and episodic memory.");c4(bs.TextNode("     "));c4(bs.Concat([g.btnPrimary("start",function(){return function(){return(bZ("start_test_sdmt"))("start_test_sdmt");};}),bs.TextNode("     "),g.btnInfo("about",function(){return function(){return(bZ("about_test_sdmt"))("about_test_sdmt");};}),bs.TextNode("     "),g.btnDark("my history",function(){return function(){return(bZ("history_test_sdmt"))("history_test_sdmt");};}),bs.TextNode("     "),g.btnSecondary("cancel",function(){return function(){return(bZ("cancel"))("cancel");};})]));}else c3("Choose a cognitive test from the list.");}):b6.$==1&&((cM=db("start_test_pasat",b6.$0),cM!=null&&cM.$==1)&&b6.$1.$==0)?(bY("start_test_pasat"))(function(){c3("You are going to hear a seriesof single digit numbers that will be presented at the rate of one every 3 seconds. \r\n                                     Listen for the first two numbers, add them up, and tell me your answer. \r\n                                     When you hear the next number, add it to the one you heard right before it. \r\n                                     Continue to add the next number to each preceding one. Remember you are not being asked to give me a running total, but rather the sum of the last two numbers that you heard.");c2("Listen to the instructions and click the Yes button when ready.");b1(new _2({$:0,$0:"verify_start_test_pasat",$1:bb.name(),$2:{$:1,$0:function(){(bZ("verify"))("yes");},$1:function(){(bZ("reject"))("no");}},$3:null,$4:function(){c3("Are you ready to begin?");c2("Are you ready to begin?");}}));}):b6.$==1&&(cO=x.Yes(b6.$0),cO!=null&&cO.$==1&&((cP=dc("verify_start_test_pasat",cO.$0),cP!=null&&cP.$==1)&&b6.$1.$==0))?(by("#testprofile").removeClass("invisible"),by("#testprofile-name").text("PASAT"),by(self.document.getElementById("#testprofile-timer")).asPieProgress(i.New("pie_progress",0,120,0,120,1200,"linear",function(){var de,df;de=bq.toInt(bS.floor(this.now/60));df=bq.toInt(this.now%60);return a.String(de)+": "+(df>10?a.String(df):"0"+a.String(df));})),by(self.document.getElementById("#testprofile-timer")).asPieProgress("start")):b6.$==1&&((cR=db("start_test_sdmt",b6.$0),cR!=null&&cR.$==1)&&b6.$1.$==0)?(bY("start_test_sdmt"))(function(){c3("You will see a sequence of 9 symbols. Using the symbol-digit key that you see displayed here, enter the 9 digits that match the symbol according to the key.");c2("Listen to the instructions and click the Yes button when ready.");c4(bs.TextNode("    "));b1(new _2({$:0,$0:"verify_start_test_sdmt",$1:bb.name(),$2:{$:1,$0:function(){(bZ("verify"))("yes");},$1:function(){(bZ("reject"))("no");}},$3:null,$4:a.ignore}));}):b6.$==1&&(cT=x.Yes(b6.$0),cT!=null&&cT.$==1&&((cU=dc("verify_start_test_sdmt",cT.$0),cU!=null&&cU.$==1)&&b6.$1.$==0))?(b0("verify_start_test_sdmt"))(function(){c5("testentry",true);by("#testprofile").hasClass("invisible")?by("#testprofile").removeClass("invisible").addClass("visible"):void 0;c4(bs.Element("table",[d.cls("table table-bordered")],[bs.Element("thead",[],[bs.Element("tr",[],bA.map(function(de){return bs.Element("th",[bt.Create("scope","col"),bt.Create("style","font-size:300%;text-align:center")],[bs.TextNode(de)]);},b4))]),bs.Element("tbody",[],[bs.Element("tr",[],bA.mapi(function(de){return bs.Element("td",[bt.Create("style","font-size:300%;text-align:center")],[bs.TextNode(a.String(de+1))]);},b4))])]));by(self.document.getElementById("pp1")).asPieProgress(i.New("pie_progress",0,90,0,90,900,"linear",function(){var de,df;de=bq.toInt(bS.floor(this.now/60));df=bq.toInt(this.now%60);return a.String(de)+": "+(df>10?a.String(df):"0"+a.String(df));}));c3("You have 90 seconds to complete this round.");c2("Round 1");c4(bs.Element("table",[d.cls("table table-bordered")],[bs.Element("thead",[],[bs.Element("tr",[],bm.map(function(de){return bs.Element("th",[bt.Create("scope","col"),bt.Create("style","font-size:300%;text-align:center")],[bs.TextNode(de)]);},d.shuffleArray(bm.ofList(b4))))])]));c4(bs.Concat([bs.TextNode("    "),g.btnWarning("1",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("2",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("3",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("4",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("5",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("6",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("7",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("8",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("9",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnSuccess("next",function(){return function(){return(bZ("next_test_sdmt"))("next_test_sdmt");};}),bs.TextNode("    "),g.btnDanger("stop",function(){return function(){return(bZ("stop_test_sdmt"))("stop_test_sdmt");};})]));by(self.document.getElementById("pp1")).asPieProgress("start");c3("Enter the 9 digits corresponding to the symbols shown.");}):b6.$==1&&((cW=db("r_test_sdmt",b6.$0),cW!=null&&cW.$==1)&&b6.$1.$==0)?(c6(),c2("Round 2"),by("#testprofile-round").text("Round 2"),c4(bs.Element("table",[d.cls("table table-bordered")],[bs.Element("thead",[],[bs.Element("tr",[],bm.map(function(de){return bs.Element("th",[bt.Create("scope","col"),bt.Create("style","font-size:300%;text-align:center")],[bs.TextNode(de)]);},d.shuffleArray(bm.ofList(b4))))])])),c4(bs.Concat([bs.TextNode("    "),g.btnWarning("1",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("2",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("3",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("4",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("5",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("6",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("7",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("8",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnWarning("9",function(){return function(){return(bZ("r_test_sdmt"))("r_test_sdmt");};}),bs.TextNode("    "),g.btnSuccess("next",function(){return function(){return(bZ("next_test_sdmt"))("next_test_sdmt");};}),bs.TextNode("    "),g.btnDanger("stop",function(){return function(){return(bZ("stop_test_sdmt"))("stop_test_sdmt");};})])),c3("Enter the 9 digits corresponding to the symbols shown.")):b6.$==1&&((cY=db("stop_test_sdmt",b6.$0),cY!=null&&cY.$==1)&&b6.$1.$==0)?(c6(),by(self.document.getElementById("pp1")).asPieProgress("stop"),c4(bs.Concat([g.btnPrimary("knowledge",function(){return function(){return(bZ("list_kb_categories"))("list_kb_categories");};}),bs.TextNode("     "),g.btnPrimary("tests",function(){return function(){return(bZ("list_test_categories"))("list_test_categories");};}),bs.TextNode("     "),g.btnPrimary("symptoms",function(){return function(){return(b2("symptom_journal"))("symptom_journal");};}),bs.TextNode("     "),g.btnPrimary("mood",function(){return function(){return(b2("mood_journal"))("mood_journal");};}),bs.TextNode("     "),g.btnPrimary("caregiver",function(){return function(){return(b2("caregiver_journal"))("caregiver_journal");};}),bs.TextNode("     "),g.btnSecondary("settings",function(){return function(){return(bZ("list_settings_categories"))("list_settings_categories");};}),bs.TextNode("     "),g.btnInfo("help",function(){return function(){return(bZ("help"))("help");};})]))):b6.$==1&&((c0=db("query",b6.$0),c0!=null&&c0.$==1)?b6.$1.$==0:(c1=db("medication_journal",b6.$0),c1!=null&&c1.$==1)&&b6.$1.$==0)?_9.update(bW):_4.didNotUnderstand(bW,function(de){bb.debug(de);},bb.name());_4.debugInterpreterEnd(bW,function(de){bb.debug(de);},bb.name());};bb.debug=function(bW){d.debug(bb.name(),bW);};bb.name=function(){bc.$cctor();return bc.name;};bc.$cctor=function(){bc.$cctor=a.ignore;bc.name="Accounting";};bd.update=function(bW){var bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx;function cy(cP){_4.say(bW,cP);}function cz(cP){bY.EchoDoc(cP);}function cA(cP,cQ){return _4.sayRandom(bW,cP,cQ);}function cB(cP,cQ){return _4.add(bW,function(cR){bd.debug(cR);},cP,cQ);}function cC(cP){bd.debug(cP);}function cD(cP){bd.debug(cP);}function cE(cP){bd.update(cP);}function cF(cP){bd.debug(cP);}function cG(cP){bd.debug(cP);}function cH(cP,cQ){return _4["Intent'_"](bW,cP,cQ);}function cI(cP,cQ){return _4.Response_(bW,cP,cQ);}function cJ(cP,cQ){return _4["Response'_"](bW,cP,cQ);}function cK(cP){bd.debug(cP);}function cL(cP){bd.debug(cP);}function cM(cP){return new _2({$:0,$0:"switchUser",$1:bd.name(),$2:{$:1,$0:function(){(b0("verify"))("yes");},$1:function(){(b0("reject"))("no");}},$3:null,$4:function(){cy((function(cQ){return function(cR){return cQ("Do you want me to switch to the user "+bw.toSafe(cR));};}(a.id))(cP));}});}function cN(cP){var cQ;cA(v.waitRetrievePhrases(),"user name");bC.Start((cQ=null,bC.Delay(function(){return bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.Server.getUser:749051406",[cP]),function(cR){var cS;return cR==null?(cy((function(cT){return function(cU){return cT("I did not find a user with the name "+bw.toSafe(cU)+".");};}(a.id))(cP)),b2(new _2({$:0,$0:"addUser",$1:bd.name(),$2:{$:1,$0:function(){(b0("verify"))("yes");},$1:function(){(b0("reject"))("no");}},$3:null,$4:function(){cB("addUser",cP);cy((function(cT){return function(cU){return cT("Do you want me to add the user "+bw.toSafe(cU)+"?");};}(a.id))(cP));}})),bC.Zero()):(cS=cR.$0,bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.Server.updateUserLastLogin:-1441594608",[cS.Name]),function(){cA(v.helloUserPhrases(),cS.Name);cy("You have 2 new messages. You have 2 tests scheduled for today.");cB("user",cP);return bC.Combine(cS.LastLoggedIn!=null?bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.Server.humanize:135605700",[cS.LastLoggedIn.$0]),function(cT){cy((function(cU){return function(cV){return cU("You last logged in "+bw.toSafe(cV)+".");};}(a.id))(cT));return bC.Zero();}):bC.Zero(),bC.Delay(function(){return bC.Combine(by("#profile").hasClass("invisible")?(by("#profile").removeClass("invisible").addClass("visible"),bC.Zero()):bC.Zero(),bC.Delay(function(){cz(bs.Concat([g.btnPrimary("accounts",function(){return function(){return(b3("list_account_types"))("list_account_types");};}),bs.TextNode("     "),g.btnPrimary("transactions",function(){return function(){return(b3("list_test_categories"))("list_test_categories");};}),bs.TextNode("     "),g.btnPrimary("budgets",function(){return function(){return(b4("symptom_journal"))("symptom_journal");};}),bs.TextNode("     "),g.btnPrimary("reports",function(){return function(){return(b4("mood_journal"))("mood_journal");};}),bs.TextNode("     "),g.btnPrimary("caregiver",function(){return function(){return(b4("caregiver_journal"))("caregiver_journal");};}),bs.TextNode("     "),g.btnSecondary("settings",function(){return function(){return(b0("list_settings_categories"))("list_settings_categories");};}),bs.TextNode("     "),g.btnInfo("help",function(){return function(){return(b0("help"))("help");};})]));return bC.Zero();}));}));}));});})),null);}function cO(cP){var cQ;bC.Start((cQ=null,bC.Delay(function(){cA(v.waitAddPhrases(),"user");return bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.Server.addUser:1359059362",[cP]),function(cR){return cR.$==1?(d.error((((bp.Curried3(function(cS,cT,cU){return cS("Error adding user "+bw.toSafe(cT)+":"+bw.toSafe(cU)+".");}))(a.id))(cP))(cR.$0)),cy((function(cS){return function(cT){return cS("Sorry I was not able to add the user "+bw.toSafe(cT)+" to the system.");};}(a.id))(cP)),bC.Zero()):(cB("user",cP),cB("newuser",true),cy((function(cS){return function(cT){return cS("Hello "+bw.prettyPrint(cT)+", nice to meet you.");};}(a.id))(bX.get_Item("user"))),cy("Click on one of the buttons below to get a list of writing prompts."),bC.Zero());});})),null);}_4.debugInterpreterStart(bW,function(cP){bd.debug(cP);},bd.name());bX=bW.$1;bY=bW.$0;bZ=bp.Curried(_4.handle,2,[bW,cC]);b0=bp.Curried(_4.trigger,2,[bW,cD,cE]);b1=bp.Curried(_4.endt,2,[bW,cF]);b2=function(cP){_6.ask(bW,cG,cP);};b3=bp.Curried(_4.trigger,2,[bW,cK,function(cP){bb.update(cP);}]);b4=bp.Curried(_4.trigger,2,[bW,cL,function(cP){_9.update(cP);}]);b5=_4.frame(bW.$4);if(b5.$==1&&(b7=cH("greet",b5.$0),b7!=null&&b7.$==1?(b8=x.Entity1OfAny("name",b7.$0[1]),b8!=null&&b8.$==1?b5.$1.$==0&&(b6=b8.$0,true):(b9=cH("greet",b5.$0),b9!=null&&b9.$==1&&(b_=x.Entity1OfAny("contact",b9.$0[1]),b_!=null&&b_.$==1&&(b5.$1.$==0&&(b6=b_.$0,true))))):(b$=cH("greet",b5.$0),b$!=null&&b$.$==1&&(ca=x.Entity1OfAny("contact",b$.$0[1]),ca!=null&&ca.$==1&&(b5.$1.$==0&&(b6=ca.$0,true))))))(bZ("loginUser"))(function(){cN(b6.get_Value());});else b5.$==1&&(cc=cH("hello",b5.$0),cc!=null&&cc.$==1&&(cd=x.Entity1OfAny("contact",cc.$0[1]),cd!=null&&cd.$==1&&(b5.$1.$==0&&(cb=cd.$0,true))))?(bZ("loginUser"))(function(){cN(cb.get_Value());}):b5.$==1&&(cf=x.No(b5.$0),cf!=null&&cf.$==1&&(cg=cJ("addUser",cf.$0),cg!=null&&cg.$==1&&(ch=x.PStr(cg.$0[2]),ch!=null&&ch.$==1&&(b5.$1.$==0&&(ce=ch.$0,true)))))?(b1("addUser"))(function(){cy((function(cP){return function(cQ){return cP("Ok I did not add the user "+bw.toSafe(cQ)+". But you must login for me to help you.");};}(a.id))(ce));}):b5.$==1&&(cj=x.Yes(b5.$0),cj!=null&&cj.$==1&&(ck=cJ("addUser",cj.$0),ck!=null&&ck.$==1&&(cl=x.PStr(ck.$0[2]),cl!=null&&cl.$==1&&(b5.$1.$==0&&(ci=cl.$0,true)))))?(b1("addUser"))(function(){cO(ci);}):b5.$==1&&(cn=_4.Intent_(bW,"greet",b5.$0),cn!=null&&cn.$==1&&(cn.$0[0]==null&&(co=x.Entity1Of1("name",cn.$0[1]),co!=null&&co.$==1&&(b5.$1.$==0&&(cm=co.$0,true)))))?bC.Start((cp=null,bC.Delay(function(){return bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.Server.getUser:749051406",[cm.get_Value()]),function(cP){return cP==null?(cy((function(cQ){return function(cR){return cQ("Sorry, the user "+bw.toSafe(cR)+" does not exist.");};}(a.id))(cm.get_Value())),bC.Zero()):(b2(cM(cP.$0.Name)),bC.Zero());});})),null):b5.$==1&&(cr=x.Yes(b5.$0),cr!=null&&cr.$==1&&(cs=cI("switchUser",cr.$0),cs!=null&&cs.$==1&&(ct=x.PStr(cs.$0[2]),ct!=null&&ct.$==1&&(b5.$1.$==0&&(cq=ct.$0,true)))))?(bX.set_Item("user",cq),_4.have(bW,"newuser")?_4.remove(bW,function(cP){bd.debug(cP);},"newuser"):void 0,cy((function(cP){return function(cQ){return cP("Ok I switched to user "+bw.prettyPrint(cQ)+".");};}(a.id))(cq))):b5.$==1&&(cv=x.No(b5.$0),cv!=null&&cv.$==1&&(cw=cI("switchUser",cv.$0),cw!=null&&cw.$==1&&(cx=x.PStr(cw.$0[2]),cx!=null&&cx.$==1&&(b5.$1.$==0&&(cu=cx.$0,true)))))?cy((function(cP){return function(cQ){return cP("Ok I did not switch to user "+bw.toSafe(cQ)+".");};}(a.id))(cu)):_4.didNotUnderstand(bW,function(cP){bd.debug(cP);},bd.name());_4.debugInterpreterEnd(bW,function(cP){bd.debug(cP);},bd.name());};bd.debug=function(bW){d.debug(bd.name(),bW);};bd.name=function(){be.$cctor();return be.name;};be.$cctor=function(){be.$cctor=a.ignore;be.name="User";};bf.update=function(bW){var bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp;function cq(cy){_4.echo(bW,cy);}function cr(cy){_4.say(bW,cy);}function cs(cy){_4["sayRandom'"](bW,cy);}function ct(cy){bf.debug(cy);}function cu(cy){bf.debug(cy);}function cv(cy){bf.debug(cy);}function cw(cy,cz){return _4.Intent_(bW,cy,cz);}function cx(cy,cz){return _4["Intent'_"](bW,cy,cz);}bX=bW.$4;bf.debug(((((bp.Curried(function(cy,cz,cA,cB){return cy("Module "+bw.toSafe(cz)+" starting utterances:"+bw.prettyPrint(cA)+", questions: "+bw.prettyPrint(cB)+".");},4))(a.id))(bf.name()))(bX))(bW.$2));bY=bp.Curried(_4.dispatch,2,[bW,ct]);bZ=bp.Curried(_4.handle,2,[bW,cu]);b0=bp.Curried(_4.Agenda_,2,[bW,cv]);b1=_4.frame(bX);b2=(b0(bd.name()))(b1);if(b2!=null&&b2.$==1){bf.debug((function(cy){return function(cz){return cy("Agenda is "+bj.p$27(cz)+".");};}(a.id))((bW.get_DialogueQuestions())[0]));bd.update(bW);}else{b3=(b0($.name()))(b1);b3!=null&&b3.$==1?(bf.debug((function(cy){return function(cz){return cy("Agenda is "+bj.p$27(cz)+".");};}(a.id))((bW.get_DialogueQuestions())[0])),$.update(bW)):b1.$==1&&((b5=cx("help",b1.$0),b5!=null&&b5.$==1)?b1.$1.$==0:(b6=cw("help",b1.$0),b6!=null&&b6.$==1)&&b1.$1.$==0)?(cr("The following commands are available."),cq("The following commands are available:"),cq("<span style='background-color:blue;color:white'>journal</span> - Show a list of writing prompts"),cq("<span style='background-color:blue;color:white'>debug-journal</span> <text-entry> - Show a set of debug info for a journal entry.")):b1.$==1&&(b8=(b9=_4.PropNotSet_(bW,"started",b1.$0),b9!=null&&b9.$==1?{$:1,$0:b9.$0}:null),b8!=null&&b8.$==1&&(b_=cx("greet",b8.$0),b_!=null&&b_.$==1&&(b_.$0[1]==null&&b1.$1.$==0)))?(_4.add(bW,function(cy){bf.debug(cy);},"started",true),(bZ("greet"))(function(){cs(v.helloPhrases());})):b1.$==1&&(ca=cx("greet",b1.$0),ca!=null&&ca.$==1&&(ca.$0[1]==null&&b1.$1.$==0))?(bZ("greet"))(function(){cr("Hello, tell me your name to get started.");}):b1.$==1&&(cc=cx("greet",b1.$0),cc!=null&&cc.$==1&&((cd=x.Entity1Of1("name",cc.$0[1]),cd!=null&&cd.$==1)&&b1.$1.$==0))?(bY(bd.name()))(function(cy){bd.update(cy);}):b1.$==1&&(cf=cx("hello",b1.$0),cf!=null&&cf.$==1&&((cg=x.Entity1Of1("contact",cf.$0[1]),cg!=null&&cg.$==1)&&b1.$1.$==0))?(bY(bd.name()))(function(cy){bd.update(cy);}):b1.$==1&&(ci=cx("greet",b1.$0),ci!=null&&ci.$==1?(cj=x.Entity1OfAny("name",ci.$0[1]),cj!=null&&cj.$==1?b1.$1.$==0&&(ch=cj.$0,true):(ck=cx("greet",b1.$0),ck!=null&&ck.$==1&&(cl=x.Entity1OfAny("contact",ck.$0[1]),cl!=null&&cl.$==1&&(b1.$1.$==0&&(ch=cl.$0,true))))):(cm=cx("greet",b1.$0),cm!=null&&cm.$==1&&(cn=x.Entity1OfAny("contact",cm.$0[1]),cn!=null&&cn.$==1&&(b1.$1.$==0&&(ch=cn.$0,true)))))?(bY(bd.name()))(function(cy){bd.update(cy);}):b1.$==1&&((cp=cw("journal",b1.$0),cp!=null&&cp.$==1)&&b1.$1.$==0)?(bY(_9.name()))(function(cy){_9.update(cy);}):_4.didNotUnderstand(bW,function(cy){bf.debug(cy);},bf.name());}_4.debugInterpreterEnd(bW,function(cy){bf.debug(cy);},bf.name());};bf.debug=function(bW){d.debug(bf.name(),bW);};bf.name=function(){bg.$cctor();return bg.name;};bg.$cctor=function(){bg.$cctor=a.ignore;bg.name="Main";};bh.run=function(){var bW,bX,bY,bZ,b0;function b1(b2){bh.Utterances().unshift(b2);return bZ;}bW=(bX=bp.ThisFunc(function(b2,b3){return((bh.Main().get_Text())(b2))(b3);}),(bY=bh.Main().get_Options(),void a.$("#term").terminal(bX,bY)));bh.set_CUI(_0.New(bh.CUI().Voice,bh.CUI().Mic,bW,bh.CUI().Avatar,bh.CUI().Caption,bh.CUI().AudioHandlers,bh.CUI().TypingDNA));bZ=new _1({$:0,$0:bh.CUI(),$1:bh.Props(),$2:bh.Questions(),$3:bh.Output(),$4:bh.Utterances()});b0=bs.Concat([g.btnPrimary("hello",function(){return function(){bh.initMic(bh["main'"]);bh.initSpeech();return bf.update(b1(x.quick_utter("greet")));};}),bs.TextNode("     "),g.btnInfo("help",function(){return function(){bh.initMic(bh["main'"]);bh.initSpeech();return bf.update(b1(x.quick_utter("help")));};})]);bh.CUI().EchoDoc(b0);return bs.get_Empty();};bh.Main=function(){bi.$cctor();return bi.Main;};bh["main'"]=function(bW,bX){var bY,bZ,b0,b1,b2,b3,b4,b5,b6;bY=new _1({$:0,$0:bh.CUI(),$1:bh.Props(),$2:bh.Questions(),$3:bh.Output(),$4:bh.Utterances()});bh.debug((((bp.Curried3(function(b7,b8,b9){return b7("Voice: "+bw.prettyPrint(b8)+" "+bw.prettyPrint(b9));}))(a.id))(bW))(bX));bZ=(b0=C["Intent'"](bW,bX),b0!=null&&b0.$==1?{$:1,$0:b0.$0}:null);b1=(b2=C["Trait'"](bX),b2!=null&&b2.$==1?{$:1,$0:bA.ofArray([b2.$0])}:null);b3=(b4=C["Entity'$1"](bX),b4!=null&&b4.$==1?{$:1,$0:bA.ofArray([b4.$0])}:null);if(bZ==null&&(b1==null&&b3==null));else{bh.debug(((((bp.Curried(function(b7,b8,b9,b_){return b7("Voice: "+bj.p$14(b8)+" "+bj.p$17(b9)+" "+bj.p$19(b_));},4))(a.id))(bZ))(b1))(b3));bf.update((b6=new B({$:0,$0:"",$1:bZ,$2:b1,$3:b3}),(bh.Utterances().unshift(b6),bY)));}};bh.initMic=function(bW){var bX,bY;bh.set_CUI((bX={$:1,$0:new bT.Microphone(bU.getElementById("microphone"))},_0.New(bh.CUI().Voice,bX,bh.CUI().Term,bh.CUI().Avatar,bh.CUI().Caption,bh.CUI().AudioHandlers,bh.CUI().TypingDNA)));bY=bh.CUI().Mic.$0;bY.onconnecting=function(){bh.set_MicState(X.MicConnecting);return bh.debug("Mic connecting...");};bY.ondisconnected=function(){bh.set_MicState(X.MicDisconnected);return bh.debug("Mic disconnected.");};bY.onaudiostart=function(){bh.set_MicState(X.MicAudioStart);return bh.debug("Mic audio start...");};bY.onaudioend=function(){var bZ,b0,b1,b2;bh.debug("Mic audio end.");b0=bh.CUI().AudioHandlers;bZ=b0.GetEnumerator$1();try{while(bZ.MoveNext()){b1=bZ.Current();bh.debug((function(b3){return function(b4){return b3("Executing audio handler "+bw.toSafe(b4)+".");};}(a.id))(b1.K));bh.set_MicState({$:7,$0:b1.K});b2=b1.V;bh.CUI().AudioHandlers.Remove(b1.K);b2(d.lastMicData());}return;}finally{bZ.Dispose();}};bY.onerror=function(bZ){bh.set_MicState({$:6,$0:bZ});return bh.debug((function(b0){return function(b1){return b0("Mic error : "+bw.toSafe(b1)+".");};}(a.id))(bZ));};bY.onready=function(){bh.set_MicState(X.MicReady);return bh.debug("Mic ready.");};bY.onresult=function(bZ,b0){return bh.ClientState().$==2?bh.echo("I'm still trying to understand what you said before."):bh.ClientState().$==0?d.error("Client is not intialized."):bh.MicState().$==7?null:!(bZ==null||b0==null)?(bh.set_MicState({$:8,$0:bZ,$1:b0}),bh.debug((((bp.Curried3(function(b1,b2,b3){return b1("Mic result: "+bw.prettyPrint(b2)+" "+bw.prettyPrint(b3)+".");}))(a.id))(bZ))(b0)),bW(bZ,b0)):bh.debug("Mic: No result returned.");};bY.connect("4Y2BLQY5TWLIN7HFIV264S53MY4PCUAT");};bh.sayRandom=function(bW,bX){bh.say(v.getRandomPhrase(bX,bW));};bh.say=function(bW){bh.Output().unshift(bW);bh["say'"](bW);};bh["say'"]=function(bW){bh.CUI().Say$1(bW);};bh.initSpeech=function(){var bW;bW=d.toArray(bh.synth().getVoices());if(bm.length(bW)>0){bm.iter(function(bX){if(bO.Equals(bh.CUI().Voice,null)&&(bX.name.indexOf("Microsoft Zira")!=-1||bX.name.toLowerCase().indexOf("female")!=-1)){bh.set_CUI(_0.New({$:1,$0:bX},bh.CUI().Mic,bh.CUI().Term,bh.CUI().Avatar,bh.CUI().Caption,bh.CUI().AudioHandlers,bh.CUI().TypingDNA));bh.debug((function(bY){return function(bZ){return bY("Using browser speech synthesis voice "+bw.toSafe(bZ)+".");};}(a.id))(bh.CUI().Voice.$0.name));}},bW);!bO.Equals(bh.CUI().Voice,null)?(bh.CUI().Avatar.nativeVoice=true,bh.CUI().Avatar.nativeVoiceName=bh.CUI().Voice.$0.name,bh.debug((function(bX){return function(bY){return bX("Using browser speech synthesis voice "+bw.toSafe(bY)+".");};}(a.id))(bh.CUI().Voice.$0.name))):void 0;}if(bO.Equals(bh.CUI().Voice,null))bh.debug("No female browser speech synthesis voice is available. Using CMU SLT Female voice via TTS.");};bh.synth=function(){bi.$cctor();return bi.synth;};bh.Utterances=function(){bi.$cctor();return bi.Utterances;};bh.Questions=function(){bi.$cctor();return bi.Questions;};bh.Output=function(){bi.$cctor();return bi.Output;};bh.Props=function(){bi.$cctor();return bi.Props;};bh.wait=function(bW){d["Terminal.Echo'"](bh.CUI().Term,"please wait");bh.CUI().Term.pause();bW();bh.CUI().Term.resume();};bh.debug=function(bW){d.debug("CLIENT",bW);};bh.echo=function(bW){d["Terminal.EchoHtml'"](bh.CUI().Term,(function(bX){return function(bY){return bX(bw.prettyPrint(bY));};}(a.id))(bW));};bh.cui=function(){return bh.CUI();};bh.ClientState=function(){bi.$cctor();return bi.ClientState;};bh.set_ClientState=function(bW){bi.$cctor();bi.ClientState=bW;};bh.MicState=function(){bi.$cctor();return bi.MicState;};bh.set_MicState=function(bW){bi.$cctor();bi.MicState=bW;};bh.CUI=function(){bi.$cctor();return bi.CUI;};bh.set_CUI=function(bW){bi.$cctor();bi.CUI=bW;};bi.$cctor=function(){var bW,bX,bY;bi.$cctor=a.ignore;function bZ(b0,b1){var b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,cu,cv,cw,cx;function ct(cy){bh.Utterances().unshift(cy);return cu;}bh.set_CUI(_0.New(bh.CUI().Voice,bh.CUI().Mic,b0,bh.CUI().Avatar,bh.CUI().Caption,bh.CUI().AudioHandlers,bh.CUI().TypingDNA));if(bO.Equals(bh.CUI().Mic,null))bh.initMic(bh["main'"]);if(bO.Equals(bh.CUI().Voice,null))bh.initSpeech();if(bh.ClientState().$===0)bh.set_ClientState(Y.ClientReady);cu=new _1({$:0,$0:bh.CUI(),$1:bh.Props(),$2:bh.Questions(),$3:bh.Output(),$4:bh.Utterances()});if(cu.get_Props().ContainsKey("journalentry")){bh.debug("Routing input as journal entry.");_9.update(ct(new B({$:0,$0:"journal",$1:{$:1,$0:new y({$:0,$0:"journal",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bA.ofArray([new A({$:0,$0:"journal_entry",$1:"",$2:b1,$3:{$:1,$0:1}})])}})));}else if(cu.get_Props().ContainsKey("testentry")){bh.debug("Routing input as test entry.");$.update(ct(new B({$:0,$0:"r_test_sdmt",$1:{$:1,$0:new y({$:0,$0:"r_test_sdmt",$1:{$:1,$0:1}})},$2:null,$3:null})));}else{cv=E.Blank(b1);if(cv!=null&&cv.$==1)bh["say'"]("Tell me what you want me to do or ask me a question.");else{cw=E.Debug(b1);if(cw!=null&&cw.$==1){bh.debug((function(cy){return function(cz){return cy("Utterances: "+bw.prettyPrint(cz));};}(a.id))(bh.Utterances()));bh.debug((function(cy){return function(cz){return cy("Questions: "+bw.prettyPrint(cz));};}(a.id))(bh.Questions()));b3=bh.Props().GetEnumerator$1();try{while(b3.MoveNext()){cx=b3.Current();bh.debug((((bp.Curried3(function(cy,cz,cA){return cy(bw.toSafe(cz)+": "+bw.prettyPrint(cA));}))(a.id))(cx.K))(cx.V));}}finally{b3.Dispose();}bh.CUI().Wait((b4=null,bC.Delay(function(){return bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.GnuCash.getAcccounts:-365027537",[]),function(cy){return cy==null?bC.Zero():(bh.debug((function(cz){return function(cA){return cz("Accounts: "+bw.printList(function(cB){return bk.p(cB);},cA));};}(a.id))(cy.$0)),bC.Zero());});})));}else{b5=E.DebugEntities(b1);b5!=null&&b5.$==1?(b6=b5.$0,bh.CUI().Wait((b7=null,bC.Delay(function(){return bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.Server.getEntities:2107179380",[b6]),function(cy){var cz;return cy.$==1?(bh.debug(cy.$0),bC.Zero()):(cz=cy.$0,bC.Combine(bC.For(cz,function(cA){bh.debug((function(cB){return function(cC){return cB(bj.p$1(cC));};}(a.id))(cA));return bC.Zero();}),bC.Delay(function(){bh.echo("Entities:");return bC.For(cz,function(cA){bh.echo((function(cB){return function(cC){return cB("<span style='color:white;background-color:#7B68EE'>"+bj.p$1(cC)+"</span>");};}(a.id))(cA));return bC.Zero();});})));});})))):(b8=E.DebugLemmas(b1),b8!=null&&b8.$==1?(b9=b8.$0,bh.CUI().Wait((b_=null,bC.Delay(function(){return bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.Server.getMainLemmas:1432846847",[b9]),function(cy){var cz;return cy.$==1?(bh.debug(cy.$0),bC.Zero()):(cz=cy.$0,bC.Combine(bC.For(cz,function(cA){bh.debug((function(cB){return function(cC){return cB(bj.p$2(cC));};}(a.id))(cA));return bC.Zero();}),bC.Delay(function(){bh.echo("Lemmas:");return bC.For(cz,function(cA){bh.echo((function(cB){return function(cC){return cB("<span style='color:white;background-color:#FFC0CB'>"+bj.p$2(cC)+"</span>");};}(a.id))(cA));return bC.Zero();});})));});})))):(b$=E.DebugTriples(b1),b$!=null&&b$.$==1?(ca=b$.$0,bh.CUI().Wait((cb=null,bC.Delay(function(){return bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.Server.getTriples:2131326930",[ca]),function(cy){var cz;return cy.$==1?(bh.debug(cy.$0),bC.Zero()):(cz=cy.$0,bC.Combine(bC.For(cz,function(cA){return bC.For(cA,function(cB){bh.debug((function(cC){return function(cD){return cC(bj.p$3(cD));};}(a.id))(cB));return bC.Zero();});}),bC.Delay(function(){bh.echo("Triples:");return bC.For(cz,function(cA){bh.echo((function(cB){return function(cC){return cB("<span style='color:white;background-color:#00FA9A'>"+bw.printList(function(cD){return bj.p$3(cD);},cC)+"</span>");};}(a.id))(cA));return bC.Zero();});})));});})))):(cc=E.DebugEmotionalTraits(b1),cc!=null&&cc.$==1?(cd=cc.$0,bh.CUI().Wait((ce=null,bC.Delay(function(){return bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.Server.getEmotionalTraits:928948127",[cd]),function(cy){var cz;return cy.$==1?(bh.debug(cy.$0),bC.Zero()):(cz=cy.$0,bC.Combine(bC.For(cz,function(cA){bh.debug((function(cB){return function(cC){return cB(bj.p$11(cC));};}(a.id))(cA));return bC.Zero();}),bC.Delay(function(){bh.echo("Emotional Traits:");return bC.For(cz,function(cA){bh.echo((function(cB){return function(cC){return cB("<span style='color:white;background-color:#FF4500'>"+bj.p$11(cC)+"</span>");};}(a.id))(cA));return bC.Zero();});})));});})))):(cf=E.DebugBehavioralTraits(b1),cf!=null&&cf.$==1?(cg=cf.$0,bh.CUI().Wait((ch=null,bC.Delay(function(){return bC.Bind((new bR.New()).Async("Nash.Web:Nash.Web.Server.getBehavioralTraits:-1969281856",[cg]),function(cy){var cz;return cy.$==1?(bh.debug(cy.$0),bC.Zero()):(cz=cy.$0,bC.Combine(bC.For(cz,function(cA){bh.debug((function(cB){return function(cC){return cB(bj.p$12(cC));};}(a.id))(cA));return bC.Zero();}),bC.Delay(function(){bh.echo("Behavioral Traits:");return bC.For(cz,function(cA){bh.echo((function(cB){return function(cC){return cB("<span style='color:white;background-color:#FF4500'>"+bj.p$12(cC)+"</span>");};}(a.id))(cA));return bC.Zero();});})));});})))):(ci=E.Voices(b1),ci!=null&&ci.$==1?(cj=d.toArray(d.speechSynthesis().getVoices()),bh["say'"]((function(cy){return function(cz){return cy("There are currently "+a.String(cz)+" voices installed on this computer or device.");};}(a.id))(bm.length(cj))),bm.iteri(function(cy,cz){return bh["say'"](((((bp.Curried(function(cA,cB,cC,cD){return cA("Voice "+a.String(cB)+". Name: "+bw.toSafe(cC)+", Local: "+bw.prettyPrint(cD)+".");},4))(a.id))(cy))(cz.name))(cz.localService));},cj)):bh.ClientState().$==1?(cl=E.QuickHello(b1),(cl!=null&&cl.$==1?(ck=cl.$0,true):(cm=E.QuickHelp(b1),cm!=null&&cm.$==1?(ck=cm.$0,true):(cn=E.QuickYes(b1),cn!=null&&cn.$==1?(ck=cn.$0,true):(co=E.QuickNo(b1),co!=null&&co.$==1?(ck=co.$0,true):(cp=E.QuickNumber(b1),cp!=null&&cp.$==1&&(ck=cp.$0,true))))))?(bh.debug((function(cy){return function(cz){return cy("Quick Text: "+bj.p$13(cz)+".");};}(a.id))(ck)),bf.update(ct(ck)),bh.set_ClientState(Y.ClientReady)):(cq=E.JournalEntry(b1),cq!=null&&cq.$==1?(cr=cq.$0,bh.debug((function(cy){return function(cz){return cy("Journal entry: "+bj.p$13(cz)+".");};}(a.id))(cr)),bf.update(ct(cr)),bh.set_ClientState(Y.ClientReady)):bh.CUI().Wait((cs=null,bC.Delay(function(){bh.set_ClientState(Y.ClientUnderstand);E.getUtterance(b1,function(cy){var cz,cA;cz=E.HasUtterance(cy);if(cz!=null&&cz.$==1){cA=cz.$0;bh.debug(((((bp.Curried(function(cB,cC,cD,cE){return cB("Text: Intent: "+bj.p$14(cC)+", Traits: "+bj.p$17(cD)+", Entities: "+bj.p$19(cE)+".");},4))(a.id))(cA.get_Intent()))(cA.get_Traits()))(cA.get_Entities()));bf.update(ct(cA));}else{bh.debug("Text: Did not receive a meaning from the server.");bh["say'"]("Sorry I did not understand what you said.");}});bh.set_ClientState(Y.ClientReady);return bC.Zero();}))))):bh.ClientState().$==0?d.error("Client is not initialized."):bh["say'"]("I'm still trying to understand what you said before."))))));}}}return self.scrollTo(0,bq.toInt(self.document.body.scrollHeight));}bi.CUI=_0.New(null,null,null,(bN.applicationId="4277115329081938617",bW=new a.SDKConnection(),bX=new a.WebAvatar(),bX.version=8.5,bX.connection=bW,bX.avatar="20031372",bX.voice="cmu-slt",bX.voiceMod="default",bX.width=by(self).width()<=479?90:175,bX.createBox(),bX.addMessage(""),bX.processMessages(0),bX),false,new bV.New$5(),new a.TypingDNA());bi.MicState=X.MicNotInitialized;bi.ClientState=Y.ClientNotInitialzed;bi.Props=new bV.New$5();bi.Output=[];bi.Questions=[];bi.Utterances=[];bi.synth=a.speechSynthesis;bi.Main=new Z({$:0,$0:function(b0){bh["main'"](b0[0],b0[1]);},$1:[function(b0){return function(b1){return bZ(b0,b1);};},(bY={},bY.name="Main",bY.greetings="Welcome to Nash. Enter 'hello' or 'hello my name is...(you) to initialize speech.",bY.prompt="&#x2328;  ",bY)]});};bj.p$21=function(bW){return bW==null?"null":"Some "+bj.p$10(bW.$0);};bj.p$22=function(bW){return bW.$==5?"ConceptCompletion":bW.$==4?"Disjunctive":bW.$==3?"WritingPrompt ("+bw.printList(bw.prettyPrint,bW.$0)+", "+"<fun>"+")":bW.$==2?"Menu ("+bw.printList(bw.prettyPrint,bW.$0)+", "+"<fun>"+")":bW.$==1?"Verification (<fun>, <fun>)":"UserAuthentication "+bw.prettyPrint(bW.$0);};bj.p$23=function(bW){return"Utterance' ("+bw.prettyPrint(bW.$0)+", "+bw.printList(function(bX){return bj.p$24(bX);},bW.$1)+", "+bw.printList(function(bX){return bj.p$25(bX);},bW.$2)+", "+bw.printList(function(bX){return bj.p$26(bX);},bW.$3)+")";};bj.p$26=function(bW){return"Trait' ("+bw.prettyPrint(bW.$0)+", "+bw.prettyPrint(bW.$1)+", "+bw.prettyPrint(bW.$2)+")";};bj.p$25=function(bW){return"Entity' ("+bw.prettyPrint(bW.$0)+", "+bw.prettyPrint(bW.$1)+", "+bw.prettyPrint(bW.$2)+", "+bw.prettyPrint(bW.$3)+")";};bj.p$24=function(bW){return"Intent' ("+bw.prettyPrint(bW.$0)+", "+bw.prettyPrint(bW.$1)+")";};bj.p$27=function(bW){return"Question ("+bw.prettyPrint(bW.$0)+", "+bw.prettyPrint(bW.$1)+", "+bj.p$22(bW.$2)+", "+bj.p$28(bW.$3)+", "+"<fun>"+")";};bj.p$28=function(bW){return bW==null?"null":"Some "+bw.printArray(bw.prettyPrint,bW.$0);};bj.p=function(bW){return bW.$==5?"OTHER":bW.$==4?"CASH":bW.$==3?"EXPENSE":bW.$==2?"ASSET":bW.$==1?"INCOME":"BANK";};bk.p=function(bW){return"{"+("Guid = "+bw.prettyPrint(bW.Guid))+"; "+("Name = "+bw.prettyPrint(bW.Name))+"; "+("Type = "+bj.p(bW.Type))+"; "+("ParentGuid = "+bw.prettyPrint(bW.ParentGuid))+"; "+("Description = "+bw.prettyPrint(bW.Description))+"}";};bj.p$1=function(bW){return"ExpertAIEntity ("+bw.prettyPrint(bW.$0)+", "+bw.prettyPrint(bW.$1)+", "+bw.printList(function(bX){return"("+bw.prettyPrint(bX[0])+", "+bw.prettyPrint(bX[1])+")";},bW.$2)+", "+bw.prettyPrint(bW.$3)+")";};bj.p$2=function(bW){return"ExpertAILemma ("+bw.prettyPrint(bW.$0)+", "+bw.prettyPrint(bW.$1)+", "+bw.printList(function(bX){return"("+bw.prettyPrint(bX[0])+", "+bw.prettyPrint(bX[1])+")";},bW.$2)+")";};bj.p$6=function(bW){return"Relation ("+bw.prettyPrint(bW.$0)+", "+bw.prettyPrint(bW.$1)+", "+bw.prettyPrint(bW.$2)+")";};bj.p$5=function(bW){return bW.$==1?"Relation "+bj.p$6(bW.$0):"Subject "+bw.prettyPrint(bW.$0);};bj.p$7=function(bW){return"Verb "+bw.prettyPrint(bW.$0);};bj.p$4=function(bW){return"Relation ("+bj.p$5(bW.$0)+", "+bw.prettyPrint(bW.$1)+", "+bj.p$7(bW.$2)+")";};bj.p$10=function(bW){return bW.$==1?"Relation "+bj.p$6(bW.$0):"Object "+bw.prettyPrint(bW.$0);};bj.p$9=function(bW){return"Relation ("+bj.p$7(bW.$0)+", "+bw.prettyPrint(bW.$1)+", "+bj.p$10(bW.$2)+")";};bj.p$8=function(bW){return bW==null?"null":"Some "+bj.p$9(bW.$0);};bj.p$3=function(bW){return"Triple ("+bj.p$4(bW.$0)+", "+bj.p$8(bW.$1)+")";};bj.p$11=function(bW){return"EmotionalTrait ("+bw.prettyPrint(bW.$0)+", "+bw.printList(bw.prettyPrint,bW.$1)+", "+bw.prettyPrint(bW.$2)+")";};bj.p$12=function(bW){return"BehavioralTrait ("+bw.prettyPrint(bW.$0)+", "+bw.printList(bw.prettyPrint,bW.$1)+", "+bw.prettyPrint(bW.$2)+")";};bj.p$16=function(bW){return bW==null?"null":"Some "+bw.prettyPrint(bW.$0);};bj.p$15=function(bW){return"Intent ("+bw.prettyPrint(bW.$0)+", "+bj.p$16(bW.$1)+")";};bj.p$14=function(bW){return bW==null?"null":"Some "+bj.p$15(bW.$0);};bj.p$18=function(bW){return"Trait ("+bw.prettyPrint(bW.$0)+", "+bw.prettyPrint(bW.$1)+", "+bj.p$16(bW.$2)+")";};bj.p$17=function(bW){return bW==null?"null":"Some "+bw.printList(function(bX){return bj.p$18(bX);},bW.$0);};bj.p$20=function(bW){return"Entity ("+bw.prettyPrint(bW.$0)+", "+bw.prettyPrint(bW.$1)+", "+bw.prettyPrint(bW.$2)+", "+bj.p$16(bW.$3)+")";};bj.p$19=function(bW){return bW==null?"null":"Some "+bw.printList(function(bX){return bj.p$20(bX);},bW.$0);};bj.p$13=function(bW){return"Utterance ("+bw.prettyPrint(bW.$0)+", "+bj.p$14(bW.$1)+", "+bj.p$17(bW.$2)+", "+bj.p$19(bW.$3)+")";};}(self));
